function TimeLine(){var e=this;this.DateShow=new Date;var t=2016,n=1,i=1,a=0,o=0;this.browserType="",this.IDName="",this.ShowMode="Month_Mode",this.Is_ShowSVGLine=!0;var r,l,s=!1,c=0,d=-150,h=new Date(moment.utc().add(-6,"hours").format("YYYY-MM-DD HH").toString()+":00:00"),m=!1,u=0,v=-387.5,g=new Date,_=!1,y=0,w=0,D=-150,S=new Date(2009,0,1),f=50,M=!1,x=0,p=0,b=8,Y=12,k=5,I=11,T=[],B=[],E=[],L=[],A=[],C=[],G=[];this.Init=function(t,n){switch(e.browserType=X(),e.IDName=t,n){case"YEAR":e.ShowMode="Year_Mode";break;case"MONTH":e.ShowMode="Month_Mode";break;case"DAY":e.ShowMode="Day_Mode";break;case"MINUTE":e.ShowMode="Minute_Mode";break;default:e.ShowMode="Day_Mode"}z(),W()},this.LoadTitleHander=function(e){new Title(e.getTarget().getOwnerDocument(),12)},this.GetShowDate=function(){return e.DateShow},this.SetShowDate=function(t){return t instanceof Date&&(e.DateShow=new Date(moment.utc(t)),H(),!0)},this.DateTimeChange=function(){$("#"+e.IDName).trigger("DateTimeChange",[e.DateShow])};var H=function(){switch(t=e.DateShow.getUTCFullYear(),n=e.DateShow.getMonth()+1,i=e.DateShow.getDate(),a=e.DateShow.getHours(),o=e.DateShow.getMinutes(),document.getElementById("txt_Year").value=t.toString(),document.getElementById("txt_Month").value=n.toString(),document.getElementById("txt_Day").value=i.toString(),e.DateTimeChange(),e.ShowMode){case"Year_Mode":ye(0);break;case"Month_Mode":be(0);break;case"Day_Mode":de(0);break;case"Minute_Mode":ne(0)}},F=function(){e.DateShow=new Date(moment(e.DateShow).add(1,"day")),e.m_Trans=150*(e.m_TransYear-moment(e.DateShow).year()+5),v-=12.5,d-=3600,H()},V=function(){var t=(moment(e.DateShow).add(1,"month")-moment(e.DateShow))/1e3/3600/24;e.DateShow=new Date(moment(e.DateShow).add(1,"month")),e.m_Trans=150*(e.m_TransYear-moment(e.DateShow).year()+5),d-=3600*t,v-=12.5*t,H()},N=function(){var t=(moment(e.DateShow).add(1,"year")-moment(e.DateShow))/1e3/3600/24;d-=3600*t,v-=12.5*t,e.m_Trans=150*(e.m_TransYear-moment(e.DateShow).year()+5),e.DateShow=new Date(moment(e.DateShow).add(1,"year")),H()},O=function(){e.DateShow=new Date(moment(e.DateShow).add(-1,"day")),d+=3600,v+=12.5,H()},R=function(){var t=(moment(e.DateShow)-moment(e.DateShow).add(-1,"month"))/1e3/3600/24;e.DateShow=new Date(moment(e.DateShow).add(-1,"month")),d+=3600*t,v+=12.5*t,H()},U=function(){var t=(moment(e.DateShow)-moment(e.DateShow).add(-1,"year"))/1e3/3600/24;e.DateShow=new Date(moment.utc(e.DateShow).add(-1,"year")),d+=3600*t,v+=12.5*t,H()},z=function(){var t=e.IDName,n=document.getElementById(t);n.innerHTML=' <div class="TimeInputDiv"><div id="YearInputDiv"><input type="button" class="UpButton" id="btn_AddYear"></input><input class="TimeInput" id="txt_Year" type="text" readOnly="true"> </input><input type="button" class="DownButton" id="btn_MinusYear"></input></div><div id="MonthInputDiv"><button class="UpButton" id="btn_AddMonth"></button><input class="MonthInput" id="txt_Month" type="text" readOnly="true">  </input><button class="DownButton" id="btn_MinusMonth"></button></div><div id="DayInputDiv"><button class="UpButton" id="btn_AddDay"></button><input class="MonthInput" id="txt_Day" type="text"  readOnly="true"> </input><button class="DownButton" id="btn_MinusDay"></button></div><div id="BeforeDiv"><button class="BeforeButton" id="btn_BeforeTime"></button></div><div id="AfterDiv"><button class="AfterButton" id="btn_AfterTime"></button></div></div><div class="TimeLineTotalDiv" id="ShowTimeLine"><div class="TimeLineDiv" id="Show_YearDiv">\x3c!--时间轴部分--\x3e<div class="TimeLineDiv_Inside" id="ShowTimeLineDiv_Year"><div class="SVGDiv_Inside"><svg class="svg_ALL" height="99" id="SVG_Year_Total" xmlns="http://www.w3.org/2000/svg"></svg></div></div>\x3c!--模式选择部分--\x3e<div class="TimeMode_Inner" id=" TimeModeDiv YearMode_Div"><div class="SmallFillDiv "></div><div class="BigShowDiv    btn_ShowYear">Years</div><div class="MedShowDiv    btn_ShowMonth">Months</div><div class="SmallShowDiv  btn_ShowDay">Days</div><div class="SmallShowDiv  btn_ShowMinute">Minutes</div><div class="SmallFillDiv "></div></div></div><div class="TimeLineDiv" id="Show_MonthDiv" style="display: none">\x3c!--  月时间轴部分--\x3e<div class="TimeLineDiv_Inside" id="ShowTimeLineDiv_Month"><svg class="svg_ALL" height="100" id="SVG_Total" xmlns="http://www.w3.org/2000/svg"><g id="ShowSVG" transform="translate(0,6)" class="x aixs"></g></svg></div>\x3c!--  月时间轴选择部分 --\x3e<div id="MonthMode_Div" class=" TimeModeDiv TimeMode_Inner"><div class="SmallFillDiv  "></div><div class="SmallShowDiv  btn_ShowYear">Years</div><div class="BigShowDiv    btn_ShowMonth">Months</div><div class="SmallShowDiv  btn_ShowDay">Days</div><div class="SmallShowDiv  btn_ShowMinute">Minutes</div><div class="SmallFillDiv "></div></div></div><div class="TimeLineDiv" id="Show_DayDiv" style="display: none"><div class="TimeLineDiv_Inside" id="ShowTimeLineDiv_Day"><svg class="svg_ALL" height="100" id="SVG_Day_Total" xmlns="http://www.w3.org/2000/svg"><g id="ShowSVG_Day" transform="translate(0,6)" class="x aixs "></g></svg></div><div class=" TimeModeDiv TimeMode_Inner" id="DayMode_Div"><div class="SmallFillDiv "></div><div class="SmallShowDiv  btn_ShowYear ">Years</div><div class="MedShowDiv    btn_ShowMonth">Months</div><div class="BigShowDiv    btn_ShowDay  ">Days</div><div class="SmallShowDiv  btn_ShowMinute">Minutes</div><div class="SmallFillDiv "></div></div></div><div class="TimeLineDiv" id="Show_MinuteDiv" style="display: none"><div class="TimeLineDiv_Inside" id="ShowTimeLineDiv_Minute"><svg class="svg_ALL" height="100" id="SVG_Minute_Total" xmlns="http://www.w3.org/2000/svg"><g id="ShowSVG_Minute" transform="translate(0,6)" class="x aixs "></g></svg></div><div class=" TimeModeDiv TimeMode_Inner" id="MinuteMode_Div"><div class="SmallFillDiv "></div><div class="SmallShowDiv  btn_ShowYear ">Years</div><div class="SmallShowDiv    btn_ShowMonth">Months</div><div class="MedShowDiv    btn_ShowDay  ">Days</div><div class="BigShowDiv  btn_ShowMinute">Minutes</div><div class="SmallFillDiv "></div></div></div></div><div class="ShowHidebtnDiv" id="ShowHidebtn"></div>';try{n.style.position="fixed",n.style.bottom=0,n.style.left=0}catch(e){}j(t)},W=function(){e.DateShow=new Date,t=e.DateShow.getUTCFullYear(),n=e.DateShow.getUTCMonth()+1,i=e.DateShow.getUTCDate(),a=e.DateShow.getUTCHours(),o=e.DateShow.getUTCMinutes(),document.getElementById("btn_AddYear").onclick=N,document.getElementById("btn_AddMonth").onclick=V,document.getElementById("btn_AddDay").onclick=F,document.getElementById("btn_MinusYear").onclick=U,document.getElementById("btn_MinusMonth").onclick=R,document.getElementById("btn_MinusDay").onclick=O,document.getElementById("txt_Year").value=t.toString(),document.getElementById("txt_Month").value=n.toString(),document.getElementById("txt_Day").value=i.toString();var r=document.getElementById("ShowTimeLineDiv_Year");r.onmousedown=ue,r.onmouseup=ve,r.onmouseout=ge,r.onmousemove=_e;var l=document.getElementById("ShowTimeLineDiv_Month");l.onmousedown=Se,l.onmouseup=fe,l.onmouseout=xe,l.onmousemove=Me;var s=document.getElementById("ShowTimeLineDiv_Day");s.onmousedown=oe,s.onmouseup=re,s.onmouseout=le,s.onmousemove=se;var c=document.getElementById("ShowTimeLineDiv_Minute");c.onmousedown=P,c.onmouseup=Q,c.onmouseout=Z,c.onmousemove=ee;for(var d=document.getElementsByClassName("btn_ShowYear"),h=0;h<d.length;h++)d[h].onclick=Te;for(var m=document.getElementsByClassName("btn_ShowMonth"),u=0;u<m.length;u++)m[u].onclick=Be;for(var v=document.getElementsByClassName("btn_ShowDay"),g=0;g<v.length;g++)v[g].onclick=Ee;for(var _=document.getElementsByClassName("btn_ShowMinute"),y=0;y<_.length;y++)_[y].onclick=Le;document.getElementById("btn_BeforeTime").onclick=O,document.getElementById("btn_AfterTime").onclick=F,document.getElementById("ShowHidebtn").onclick=Ie,q()};$(window).resize(function(){e.Is_ShowSVGLine&&j(e.IDName)});var X=function(){var e=window.navigator.userAgent;return navigator.userAgent.indexOf("MSIE")>0?"MSIE":(isFirefox=navigator.userAgent.indexOf("Firefox")>0)?"Firefox":e.indexOf("Chrome")>=0?"Chrome":(isSafari=navigator.userAgent.indexOf("Safari")>0)?"Safari":(isCamino=navigator.userAgent.indexOf("Camino")>0)?"Camino":(isMozilla=navigator.userAgent.indexOf("Gecko/")>0)?"Gecko":e.indexOf("Opera")>=0?"Opera":"unknown"},j=function(){var t=e.browserType,n=e.IDName;if(""!=n){var i=document.getElementById(n),a=document.getElementById("ShowTimeLine"),o=document.getElementsByClassName("svg_ALL"),r=0;if("Chrome"==t){var l=(document.documentElement.scrollWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth);r=l,document.getElementById(n).style.width=l>380?l:380;var s;s=l-490,a.style.width=l-360;for(var c=0;c<o.length;c++)o[c].style.width=s}if("Firefox"==t){var d=document.documentElement.clientWidth-20;r=d,i.style.width=d>360?d+"px":"360px";for(var h=d-490,m=0;m<o.length;m++)o[m].style.width=h+"px";a.style.width=d-360+"px"}if("MSIE"==t){var u=document.documentElement.clientWidth-20;r=u,i.style.width=u>360?u+"px":"360px";for(var v=u-490,g=0;g<o.length;g++)o[g].style.width=v+"px";a.style.width=u-360+"px"}var _=document.getElementsByClassName("TimeLineTotalDiv");if(r<495){for(var y=0;y<_.length;y++)_[y].style.display="none";e.Is_ShowSVGLine=!1}else{for(var w=0;w<_.length;w++)_[w].style.display="block";e.Is_ShowSVGLine=!0}if(0!=r&&r>0){var D=r-300-150;b=Math.ceil(D/10/25)+1,Y=Math.ceil(D/12.5/12)+2,k=Math.ceil(D/29/12.5)+1,I=Math.ceil(D/12/12.5)+1}}},q=function(){switch(e.ShowMode){case"Year_Mode":ye(0),Te();break;case"Month_Mode":pe(2009),Be();break;case"Day_Mode":de(0),Ee();break;case"Minute_Mode":ne(0),Le()}},J=function(r){return NaN!=parseInt(r)&&(t=parseInt(r).toString(),e.DateShow=new Date(t,n-1,i,a,o,0),H(),!0)},K=function(r){var l=r.getAttribute("value"),s=l.split("-")[0],c=l.split("-")[1];return NaN!=parseInt(s)&&(t=parseInt(s).toString(),n=parseInt(c).toString(),e.DateShow=new Date(t,n-1,i,a,o,0),H(),!0)},P=function(e){s=!0,r=e.clientX,c=r},Q=function(e){s=!1},Z=function(){"Firefox"!=e.browserType&&(s=!1)},ee=function(e){if(s){r=e.clientX;var t=c-r;(t>=1||t<=-1)&&(c=r,ne(t))}},te=function(){for(var e=document.getElementsByClassName("Btn_MinuteRect"),t=0;t<e.length;t++)e[t].onclick=function(){ie(this)}},ne=function(t){var n="";for(d-=t;d>0;)d-=150,h.setHours(h.getHours()-1);for(;d<-150;)d+=150,h.setHours(h.getHours()+1);for(var i=d,a=h,o=moment(e.DateShow).utc().format("YYYY-MM-DD HH:mm"),r=!1,l=0;l<I;l++){for(var s="",c='<g class="tick_Total_Year" transform="translate('+i+')"><line x1="0" x2="0" y1="0" y2="80" class="tick_Line"></line>',m=new Date(moment(a).format("YYYY-MM-DD HH:mm")),u=0;u<12;u++){var v=(12.5*u).toString(),g=moment(m).utc().format("YYYY-MM-DD HH:mm"),_=ae(g,v),y=Ce(g,v);if(!e.AnimeMode&&!r){var w=m-e.DateShow;3e5>w&&w>=0&&""==s&&(r=!0,s='<g id="guitarpick" class="SVG_guitarpick"  transform="translate('+(v-8)+',-10)"><title>'+o+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>')}if(1==e.AnimeMode&&!r){s="";var D=moment(m)-e.AnimeDate;3e5>D&&D>=0&&""==s&&(console.log("get!"),r=!0,s='<g id="guitarpick" class="SVG_Anime_guitarpick"  transform="translate('+(v-8)+',-10)"><title>'+o+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>')}c=c+_+('   <g class="tick_Year_One" transform="translate('+v+')" ><rect class="DayRect Btn_MinuteRect" x="0.2" y="0" width="12.5" height="55" value="'+g+'"><title>'+g+'</title></rect><line class="tick_dot" x1="12" x2="12" y1="0" y2="52"></line></g>'),e.AnimeMode&&(c+=y),"75"!=v&&"215"!=v||(c=c+'<line x1="'+v+'" x2="'+v+'" y1="40" y2="55" class="tick_10DayLine" ></line>'),m.setMinutes(m.getMinutes()+5)}i=150+i;var S=moment(a).utc().format("YYYY-MM-DD HH:mm");S=0==a.getUTCHours()?moment(a).utc().format("YYYY-MM-DD"):moment(a).utc().format("HH:mm");c=c+s+('<g transform="translate(0)"><rect x="0" y="55" width="150" height="25" class="Rect_White"/><text x="12" y="73" class="Month_Text_Show">'+S+'</text></g><g><circle cx="0" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/><circle cx="150" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/></g><line x1="150" x2="150" y1="0" y2="80" class="tick_Line"></line></g>'),n+=c,a=new Date(moment(a).add(1,"hour"))}var f=document.getElementById("ShowSVG_Minute");"MSIE"!=e.browserType?f.innerHTML=n:$("#ShowSVG_Day").append(n),te()},ie=function(t){var n=t.getAttribute("value"),i=new Date(moment.utc(n));e.SetShowDate(i)},ae=function(e,t){if(e=e.toString(),0==G.length||!G.length)return"";for(var n='<g style="width: 12px;height: 40px;fill:#5F5F01" class="tick_Data_Show" transform="translate('+t+')">',i=e,a=[],o=0;o<G.length;o++){var r=!1;-1!=G[o].indexOf(i)&&(r=!0),a.push(r)}var l=Math.round(40/G.length,2);l>10&&(l=10);for(var s=0;s<G.length;s++){var c="",d=s*l;if(1==a[s]){var h=E[s],m=d+l-.4;h?(!0,c='<rect class="Rect_Data_Show" x="-0.2" y="'+d+'" width="12.7" height="'+l+'" ></rect><line x1="0" x2="12.5" y1="'+d+'" y2="'+d+'" class="Data_tick_Line"></line><line x1="0" x2="12.5" y1="'+m+'" y2="'+m+'" class="Data_tick_Line"></line>'):(!0,c='<rect class="Rect_Data_Hide" x="0" y="'+d+'" width="12.5" height="'+l+'" ></rect><line x1="0" x2="12.5" y1="'+d+'" y2="'+d+'" class="Data_tick_Line"></line><line x1="0" x2="12.5" y1="'+m+'" y2="'+m+'" class="Data_tick_Line"></line>')}else c="";n+=c}return n+="</g>"},oe=function(e){m=!0,l=e.clientX,u=l},re=function(e){m=!1},le=function(){"Firefox"!=e.browserType&&(m=!1)},se=function(e){if(m){l=e.clientX;var t=u-l;(t>=1||t<=-1)&&(u=l,de(t))}},ce=function(){for(var e=document.getElementsByClassName("Btn_DayRect"),t=0;t<e.length;t++)e[t].onclick=function(){he(this)}},de=function(t){var n="";for(v-=t;v>0;){var i=12.5*new Date(g.getFullYear(),g.getMonth(),0).getDate();v-=i,g.setMonth(g.getMonth()-1)}for(var a=12.5*-new Date(g.getFullYear(),g.getMonth()+1,0).getDate();v<a;)v-=a,g.setMonth(g.getMonth()+1),a=12.5*-new Date(g.getFullYear(),g.getMonth()+1,0).getDate();Month_Trans=v;for(var o=new Date(g.getFullYear(),g.getMonth()-1,g.getDate()),r=moment(e.DateShow).format("YYYY-MM-DD"),l=0;l<k;l++){for(var s="",c=new Date(o.getFullYear(),o.getMonth()+1,0).getDate(),d=o.getFullYear(),h=o.getMonth(),m='  <g class="tick_Total_Year" transform="translate('+Month_Trans+')"><line x1="0" x2="0" y1="0" y2="80" class="tick_Line"></line>',u=0;u<c;u++){var _=(12.5*u).toString(),y=moment(new Date(d,parseInt(h),parseInt(u+1))).format("YYYY-MM-DD"),w=me(y,_);e.AnimeMode?y==e.AnimeDate.utc().format("YYYY-MM-DD")&&(s='<g id="guitarpick" class="SVG_Anime_guitarpick" transform="translate('+(_-8)+',-10)"><title>'+r+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>'):y==r&&(s='<g id="guitarpick" class="SVG_guitarpick"   transform="translate('+(_-8)+',-10)"><title>'+r+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>');m=m+w+('   <g class="tick_Year_One" transform="translate('+_+')" ><rect class="DayRect Btn_DayRect" x="0.2" y="0" width="12.5" height="55" value="'+d+"-"+(parseInt(h)+1)+"-"+parseInt(u+1)+'"><title>'+d+"-"+(parseInt(h)+1)+"-"+parseInt(u+1)+'</title></rect><line class="tick_dot" x1="12" x2="12" y1="0" y2="52"></line></g>'),"62.5"!=_&&"125"!=_&&"187.5"!=_&&"250"!=_&&"312.5"!=_&&"375"!=_||(m=m+'<line x1="'+_+'" x2="'+_+'" y1="40" y2="55" class="tick_10DayLine" ></line>')}Month_Trans=12.5*c+Month_Trans;var D=12.5*c;m=m+s+('<g transform="translate(0)"><rect x="0" y="55" width="'+D+'" height="25" class="Rect_White"/><text x="12" y="73" class="Month_Text_Show">'+(o.getFullYear()+"-"+(o.getMonth()+1))+'</text></g><g><circle cx="0" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/><circle cx="'+D+'" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/></g><line x1="'+D+'" x2="'+D+'" y1="0" y2="80" class="tick_Line"></line></g>'),n+=m,o=new Date(moment(o).add(1,"month"))}var S=document.getElementById("ShowSVG_Day");"MSIE"!=e.browserType?S.innerHTML=n:$("#ShowSVG_Day").html(n),ce()},he=function(t){var n=t.getAttribute("value"),i=n.split("-"),a=new Date(i[0],parseInt(i[1])-1,i[2]),o=new Date(moment(a).format("YYYY-MM-DD")+"T00:00:00+00:00");e.SetShowDate(o)},me=function(e,t){if(e=e.toString(),!C.length||0==C.lemgth)return"";for(var n='<g style="width: 12px;height: 40px;fill:#5F5F01" class="tick_Data_Show" transform="translate('+t+')">',i=e,a=[],o=0;o<C.length;o++){var r=!1;-1!=C[o].indexOf(i)&&(r=!0),a.push(r)}var l=Math.round(40/C.length,2);l>10&&(l=10);for(var s=0;s<C.length;s++){var c="",d=s*l;if(1==a[s]){var h=E[s],m=d+l-.4;h?(!0,c='<rect class="Rect_Data_Show" x="0" y="'+d+'" width="12.5" height="'+l+'" ></rect><line x1="0" x2="12.5" y1="'+d+'" y2="'+d+'" class="Data_tick_Line"></line><line x1="0" x2="12.5" y1="'+m+'" y2="'+m+'" class="Data_tick_Line"></line>'):(!0,c='<rect class="Rect_Data_Hide" x="0" y="'+d+'" width="12.5" height="'+l+'" ></rect><line x1="0" x2="12.5" y1="'+d+'" y2="'+d+'" class="Data_tick_Line"></line><line x1="0" x2="12.5" y1="'+m+'" y2="'+m+'" class="Data_tick_Line"></line>')}else c="";n+=c}return n+="</g>"},ue=function(e){M=!0,e=e||window.event,x=e.clientX,p=x},ve=function(e){e=e||window.event,M=!1,x=e.clientX},ge=function(){"Firefox"!=e.browserType&&(M=!1)},_e=function(e){if(M){e=e||window.event,x=e.clientX;var t=p-x;p=x,(t>=2||t<=-2)&&ye(t)}},ye=function(t){f-=t;for(var n=f,i=document.getElementById("SVG_Year_Total"),a=moment(e.DateShow).format("YYYY"),o='<g id="ShowSVG_Year" transform="translate('+n+',10)" class="x aixs">',r=moment(new Date(1980,0,1)).year(),l=0;l<b;l++){for(var s="",c=(250*l).toString(),d='<g class="tick_Total_Year" transform="translate('+c+')"><line x1="0" x2="0" y1="0" y2="80" class="tick_Line"></line>',h=0;h<10;h++){var m=r+h,u=(25*h).toString();e.AnimeMode?m==e.AnimeDate.utc().format("YYYY")&&(s='<g id="guitarpick" class="SVG_Anime_guitarpick" transform="translate('+(u-3)+',-10)"><title>'+m+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>'):a==m&&(s='<g id="guitarpick" class="SVG_guitarpick"   transform="translate('+(u-3)+',-10)"><title>'+m+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>');var v=De(m,u),g="";"MSIE"!=e.browserType&&(g="<title>"+m+"</title>");d=d+v+('<g class="tick_Year_One" transform="translate('+u+')"><rect class="DayRect Btn_YearRect" x="0.2" y="0" width="25" height="55" value="'+m+'"  >'+g+'</rect><line class="tick_dot" x1="24" x2="24" y1="0" y2="52"></line></g>')}d=d+s+('<g transform="translate(0)"><rect x="0" y="55" width="250" height="25" class="Rect_White" value="'+r+'"/><text x="12" y="73" class="Month_Text_Show">'+r+'</text></g><g><circle cx="0" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/><circle cx="250" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/></g><line x1="250" x2="250" y1="0" y2="80" class="tick_Line"></line></g>'),o+=d,r+=10}o+="</g></g>","MSIE"!=e.browserType?(i.innerHTML=o,$("#SVG_Year_Total").html(o)):$("#SVG_Year_Total").html(o);for(var _=document.getElementsByClassName("Btn_YearRect"),y=0;y<_.length;y++)_[y].onclick=function(){we(this)}},we=function(e){var t=e.getAttribute("value"),n=new Date(t),i=n.getFullYear();J(i)},De=function(e,t){if(e=e.toString(),0==L.length||!L.length)return"";for(var n='<g style="width: 12px;height: 40px;fill:#5F5F01" class="tick_Data_Show" transform="translate('+t+')">',i=e,a=[],o=0;o<L.length;o++){var r=!1;-1!=L[o].indexOf(i)&&(r=!0),a.push(r)}var l=Math.round(40/L.length,2);l>10&&(l=10);for(var s=0;s<L.length;s++){var c="",d=s*l;if(1==a[s]){var h=E[s],m=d+l-.4;h?(!0,c='<rect class="Rect_Data_Show" x="0" y="'+d+'" width="25" height="'+l+'" ></rect><line x1="0" x2="25" y1="'+d+'" y2="'+d+'" class="Data_tick_Line"></line><line x1="0" x2="25" y1="'+m+'" y2="'+m+'" class="Data_tick_Line"></line>'):(!0,c='<rect class="Rect_Data_Hide" x="0" y="'+d+'" width="25" height="'+l+'" ></rect><line x1="0" x2="25" y1="'+d+'" y2="'+d+'" class="Data_tick_Line"></line><line x1="0" x2="25" y1="'+m+'" y2="'+m+'" class="Data_tick_Line"></line>')}else c="";n+=c}return n+="</g>"},Se=function(e){e=e||window.event,y=e.clientX,w=y,_=!0},fe=function(e){_=!1},Me=function(e){if(e=e||window.event,_){y=e.clientX;var t=w-y;(t>=1||t<=-1)&&(w=y,be(t))}},xe=function(t){"Firefox"!=e.browserType&&(_=!1)},pe=function(t){var n=150*(t-e.m_TransYear);be(n)},be=function(t){var n=document.getElementById("ShowSVG"),i="";for(D-=t;D>150;)S=new Date(moment(S).add(-1,"year")),D-=150;for(;D<-150;)S=new Date(moment(S).add(1,"year")),D+=150;for(var a=moment(S).year(),o=moment(e.DateShow).format("YYYY-M"),r=0;r<Y;r++){for(var l="",s=(a+r).toString(),c=150*r+D-150,d='<g class="tick_Total_Year" Tag="'+s+'" transform="translate('+c+')"><line x1="0" x2="0" y1="0" y2="80" class="tick_Line"></line>',h=0;h<12;h++){var m=12.5*h,u=s+"-"+(h+1),v="";v=ke(u,m);var g='<g class="tick_Year_One" transform="translate('+m+')"><rect x="0.2" y="0" width="12.5" height="55" class="DayRect Btn_MonthRect" value="'+u+'"><title>'+u+'</title></rect><line class="tick_dot" x1="12" x2="12" y1="0" y2="52"></line></g>';e.AnimeMode?u==e.AnimeDate.utc().format("YYYY-M")&&(l='<g id="guitarpick" class="SVG_Anime_guitarpick" transform="translate('+(c+m-10)+',-10)"><title>'+u+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>'):o==u&&(l='<g id="guitarpick" class="SVG_guitarpick" transform="translate('+(c+m-10)+',-10)"><title>'+u+'</title><path d="M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z"></path><rect width="3" height="20" x="9" y="11" ></rect><rect width="3" height="20" x="14" y="11" ></rect><rect width="3" height="20" x="19" y="11" ></rect></g>'),d=d+v+g}d=d+'<g transform="translate(0)"><rect x="0" y="55" width="150" height="25"  class="Rect_White"/><text x="12" y="73" class="Month_Text_Show" >'+s+'年</text></g><g><circle cx="0" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/><circle cx="150" cy="55" r="5" stroke="white" stroke-width="2" fill="white"/></g><line x1="150" x2="150" y1="0" y2="80" class="tick_Line"></line></g></g>',i=i+d+l}n.innerHTML=i,"MSIE"!=e.browserType?n.innerHTML=i:$("#ShowSVG").html(YearTotal),Ye()},Ye=function(){for(var e=document.getElementsByClassName("Btn_MonthRect"),t=0;t<e.length;t++)e[t].onclick=function(){K(this)}},ke=function(e,t){if(!A.length)return"";for(var n='<g style="width: 12px;height: 40px;fill:#5F5F01" class="tick_Data_Show" transform="translate('+t+')">',i=e,a=[],o=0;o<A.length;o++){var r=!1;-1!=A[o].indexOf(i)&&(r=!0),a.push(r)}var l=Math.round(40/A.length,2);l>10&&(l=10);for(var s=l-.8,c=0;c<A.length;c++){var d="",h=c*l;if(1==a[c]){var m=E[c],u=h+l-.2;d=m?'<rect class="Rect_Data_Show" x="0" y="'+h+'" width="12.5" height="'+s+'" ></rect><line x1="0" x2="12.5" y1="'+h+'" y2="'+h+'" class="Data_tick_Line"></line><line x1="0" x2="12.5" y1="'+u+'" y2="'+u+'" class="Data_tick_Line"></line>':'<rect class="Rect_Data_Hide" x="0" y="'+h+'" width="12.5" height="'+s+'" ></rect><line x1="0" x2="12.5" y1="'+h+'" y2="'+h+'" class="Data_tick_Line"></line><line x1="0" x2="12.5" y1="'+u+'" y2="'+u+'" class="Data_tick_Line"></line>'}else d="";n+=d}return n+="</g>"},Ie=function(){var t=document.getElementsByClassName("TimeLineTotalDiv");if(e.Is_ShowSVGLine){for(var n=0;n<t.length;n++)t[n].style.display="none";e.Is_ShowSVGLine=!1}else{for(var i=0;i<t.length;i++)t[i].style.display="block";e.Is_ShowSVGLine=!0,j(e.IDName)}},Te=function(){m_Show_YearDiv=document.getElementById("Show_YearDiv"),m_Show_MonthDiv=document.getElementById("Show_MonthDiv"),m_Show_DayDiv=document.getElementById("Show_DayDiv"),m_Show_MinuteDiv=document.getElementById("Show_MinuteDiv"),m_Show_YearDiv.style.display="block",m_Show_MonthDiv.style.display="none",m_Show_DayDiv.style.display="none",m_Show_MinuteDiv.style.display="none",document.getElementById("btn_AddYear").disabled=!1,document.getElementById("btn_MinusYear").disabled=!1,document.getElementById("btn_AddMonth").disabled=!0,document.getElementById("btn_MinusMonth").disabled=!0,document.getElementById("btn_AddDay").disabled=!0,document.getElementById("btn_MinusDay").disabled=!0,ye(0),e.ShowMode="Year_Mode"},Be=function(){m_Show_YearDiv=document.getElementById("Show_YearDiv"),m_Show_MonthDiv=document.getElementById("Show_MonthDiv"),m_Show_DayDiv=document.getElementById("Show_DayDiv"),m_Show_MinuteDiv=document.getElementById("Show_MinuteDiv"),m_Show_YearDiv.style.display="none",m_Show_MonthDiv.style.display="block",m_Show_DayDiv.style.display="none",m_Show_MinuteDiv.style.display="none",document.getElementById("btn_AddYear").disabled=!1,document.getElementById("btn_MinusYear").disabled=!1,document.getElementById("btn_AddMonth").disabled=!1,document.getElementById("btn_MinusMonth").disabled=!1,document.getElementById("btn_AddDay").disabled=!0,document.getElementById("btn_MinusDay").disabled=!0,e.ShowMode="Month_Mode",D=150*(moment(S).year()-moment(e.DateShow).year()+5),be(0)},Ee=function(){m_Show_YearDiv=document.getElementById("Show_YearDiv"),m_Show_MonthDiv=document.getElementById("Show_MonthDiv"),m_Show_DayDiv=document.getElementById("Show_DayDiv"),m_Show_MinuteDiv=document.getElementById("Show_MinuteDiv"),m_Show_YearDiv.style.display="none",m_Show_MonthDiv.style.display="none",m_Show_DayDiv.style.display="block",m_Show_MinuteDiv.style.display="none",$("#btn_AddYear").attr("disabled",!1),$("#btn_MinusYear").attr("disabled",!1),$("#btn_AddMonth").attr("disabled",!1),$("#btn_MinusMonth").attr("disabled",!1),$("#btn_AddDay").attr("disabled",!1),$("#btn_MinusDay").attr("disabled",!1);var t=Math.round((g-e.DateShow)/864e5*12.5,2);e.ShowMode="Day_Mode",v+=t,de(0)},Le=function(){m_Show_YearDiv=document.getElementById("Show_YearDiv"),m_Show_MonthDiv=document.getElementById("Show_MonthDiv"),m_Show_DayDiv=document.getElementById("Show_DayDiv"),m_Show_MinuteDiv=document.getElementById("Show_MinuteDiv"),m_Show_YearDiv.style.display="none",m_Show_MonthDiv.style.display="none",m_Show_DayDiv.style.display="none",m_Show_MinuteDiv.style.display="block",$("#btn_AddYear").attr("disabled",!1),$("#btn_MinusYear").attr("disabled",!1),$("#btn_AddMonth").attr("disabled",!1),$("#btn_MinusMonth").attr("disabled",!1),$("#btn_AddDay").attr("disabled",!1),$("#btn_MinusDay").attr("disabled",!1),e.ShowMode="Minute_Mode";var t=e.DateShow-h-216e5;ne(t/1e3/60/5*12.5)};this.ADDLayerData=function(e){var t=e.length;if(t)for(var n=0;n<t;n++){var i=e[n];T.push(i);var a=i.DataName,o=i.Layeris_Show,r=B.indexOf(a);-1==r&&(B.push(a),E.push(o),L.push([]),A.push([]),C.push([]),G.push([]),r=B.length-1);var l=i.DataInfo;try{var s=l[0];switch(s.length){case 4:L[r]=l;break;case 6:case 7:A[r]=l;break;case 10:C[r]=l;break;case 16:G[r]=l;break;default:console.log(s)}}catch(e){}}ye(0),be(0),de(0),ne(0)},this.AddYearData=this.AddMonthData=this.AddDayData=this.AddMinuteData=function(e){this.ADDLayerData(e)};var Ae=function(){for(var e=0;e<B.length;e++)m_OrderItem=B[e],m_showType=E[e],T.forEach(function(t){if(t.DataName===m_OrderItem){var n=t.DataInfo;try{switch(n[0].length){case 4:L[e]=n;break;case 6:case 7:A[e]=n;break;case 10:C[e]=n;break;case 16:G[e]=n}}catch(e){}}});ye(0),be(0),de(0),ne(0)};this.RemoveLayerDataByName=function(t){var n=B.indexOf(t);-1!=n&&(B.splice(n,1),E.splice(n,1),L.splice(n,1),A.splice(n,1),C.splice(n,1),G.splice(n,1));for(var i=[],a=0;a<T.length;a++)T[a].DataName!=t&&i.push(T[a]);switch(T=i,e.ShowMode){case"Year_Mode":ye(0);break;case"Month_Mode":be(0);break;case"Day_Mode":de(0);break;case"Minute_Mode":ne(0)}},this.ReSetLayerList=function(e){B=[],E=[],L=[],A=[],C=[],G=[];for(var t=0;t<e.length;t++)B.push(e[t].DataName),E.push(e[t].Layeris_Show),L.push([]),A.push([]),C.push([]),G.push([]);Ae()},this.GetLayerList=function(){return B},this.getDataList=function(e,t,n,i,a){if("string"!=typeof e)return void console.log("图层名称错误！图层名称类型选择必须为：String。");var o=i.toLowerCase();if("year"!=o&&"day"!=o&&"month"!=o&&"minute"!=o)return void console.log("数据类型错误！数据类型选择必须为：year，month，day，mintue中的一个");if(!(t instanceof moment))return void console.log("参数 数据类型错误！开始日期的数据类型选择必须为 moment");if(!(n instanceof moment))return void console.log("参数 数据类型错误！结束日期的数据类型选择必须为 moment");var r=T.length,l=[];void 0!=r&&r>0&&T.forEach(function(t){if(t.DataName==e){var n="",i=t.DataInfo;if(i.length>0){switch(i[0].length){case 3:case 4:n="year";break;case 6:case 7:n="month";break;case 10:case 11:n="day";break;case 16:n="minute"}n==o&&(l=t)}}});var s=t,c=n,d=[];if(l!=[]){var h=l.DataInfo;if(void 0!=h.length)for(var m=0;m<h.length;m++){var u=h[m],v=moment.utc(u);v.isAfter(s)&&v.isBefore(c)?d.push(v):(v.isSame(s)||v.isSame(c))&&d.push(v)}}for(var g=[],_=0;_<d.length;_++){var y=d[_],w=a;w.indexOf("yyyy")>0&&(w=w.replace("yyyy",y.utc().format("YYYY"))),w.indexOf("MM")>0&&(w=w.replace("MM",y.utc().format("MM"))),w.indexOf("dd")>0&&(w=w.replace("dd",y.utc().format("DD"))),w.indexOf("hh")>0&&(w=w.replace("hh",y.utc().format("HH"))),w.indexOf("mm")>0&&(w=w.replace("mm",y.utc().format("mm"))),g.push(w)}var D=[];return D.UrlList=g,D._id=e,D},this.getLatestDate=function(e,t){if("string"!=typeof e)return void console.log("图层名称错误！图层名称类型选择必须为：String。");var n=t.toLowerCase();if("year"!=n&&"day"!=n&&"month"!=n&&"minute"!=n)return void console.log("数据类型错误！数据类型选择必须为：year，month，day，mintue中的一个");try{var i=T.length,a=[];void 0!=i&&i>0&&T.forEach(function(t){if(t.DataName==e){var i="",o=t.DataInfo;if(o.length>0){switch(o[0].length){case 3:case 4:i="year";break;case 6:case 7:i="month";break;case 10:case 11:i="day";break;case 16:i="minute"}i==n&&(a=t)}}});var o="";if(a!=[]){var r=a.DataInfo;if(void 0!=r){o=r[r.length-1]}}if(""!=o){return moment(o+"+00:00").utc()}return}catch(e){return}},e.AnimeMode=!1,e.Anime_BeginTime,e.Anime_EndTime,e.AnimeDate,this.SetAmineMode=function(t,n){return t instanceof moment&&n instanceof moment?(e.Anime_BeginTime=t,e.Anime_EndTime=n,e.AnimeDate=t,e.AnimeMode=!0,!0):(console.log("参数类型错误，m_beginTime的类型需要为：moment"),!1)},this.SetAmineDate=function(t){return t instanceof moment?(e.AnimeDate=t,e.AnimeMode=!0,ne(0),de(0),be(0),ye(0),!0):(console.log("参数类型错误，m_AnimeDate需要为moment类型。"),!1)},this.SetAmineMode_End=function(){
return e.AnimeMode=!1,e.Anime_BeginTime=null,e.Anime_EndTime=null,e.AnimeDate=null,ne(0),de(0),be(0),ye(0),!0};var Ce=function(e,t){return""}}