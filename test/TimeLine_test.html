<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--TimeLine 样式-->
    <link rel="stylesheet" type="text/css" href="../css/TimeLine_shk.css"/>
    <!--TimeLine 依赖js  jquery -->
    <script type="text/javascript" src="../lib/jquery-1.8.3.min.js"></script>
    <!--TimeLine 依赖js  moment -->
    <script type="text/javascript" src="../lib/moment.min.js"></script>
    <!--TimeLine js-->
    <script type="text/javascript" src="../js/TimeLine_shk.js"></script>
    <title>TimeLine test</title>
</head>
<body style="background-color: black;">
<div>
    <div id="TestADD">
    </div>
    <br/>
    <div>
        <button style="width: 150px;height: 50px;" onclick="SetTime()">设置时间(+ 35日)</button>
        <button style="width: 150px;height: 50px;" onclick="GetTime()">获取当前显示时间</button>
    </div>
    <br/>
    <div>
        <button style="width: 150px;height: 50px;" onclick="AddData_Year()">添加图层数据_年模式</button>
        <button style="width: 150px;height: 50px;" onclick="AddData_Month()">添加图层数据_月模式</button>
        <button style="width: 150px;height: 50px;" onclick="AddData_Day()">添加图层数据_日模式</button>

        <button style="width: 150px;height: 50px;" onclick="AddData_Minute()">添加图层数据_分钟模式</button>
    </div>
    <br/>
    <div>
        <button style="width: 150px;height: 50px;" onclick="SetAnimeDateArea()">设置动画范围</button>
        <button style="width: 150px;height: 50px;" onclick="SetAnimeDate()">点击设置动画当前时间</button>
        <button style="width: 150px;height: 50px;" onclick="CancelAnimeDate()">取消动画模式</button>
    </div>
</div>


</body>
<script>

    var m_TimeLine = new TimeLine();
    //初始化
    m_TimeLine.Init("TestADD", "MINUTE");
    //m_TimeLine.Init("TestADD", "YEAR");

    //m_TimeLine.Init("TestADD", "MONTH");
    //m_TimeLine.Init("TestADD", "DAY");

    console.log(m_TimeLine.DateShow);

    //初始化 DateTimeChange 当数值变化 触发函数
    $("#TestADD").on("DateTimeChange", function (event, selectDate) {
        console.log("控件数值修改 ，触发事件！ 修改后的时间为：");
        console.log(selectDate);

        console.log(moment(selectDate).format("YYYY-MM-DD HH:mm:ss"));
    });

    //测试设置时
    function SetTime() {
        var NewDate = new Date();
        NewDate.setDate(NewDate.getDate() + 35);
        m_TimeLine.SetShowDate(NewDate);
    }

    //测试获取时间
    function GetTime() {
        var ShowDate = m_TimeLine.GetShowDate();
        alert(ShowDate.toString("yyyy-MM-dd HH:mm:ss"));
    }
    //测试用数据

    /*测试用数据*/
    var DemoJson = [
        {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": [{"BeginTime": "2017-10-17 06:11:12", "EndTime": "2017-10-17 06:14:12"}
            ],
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        },
        {
            "DataName": "测试数据2",
            "DataMode": "Day_Mode",
            "DataInfo": [{"BeginTime": "2017-10-18 10:17:12", "EndTime": "2017-10-18 10:22:12"}
                , {"BeginTime": "2017-10-18 06:17:12", "EndTime": "2017-10-18 06:22:12"},
                {"BeginTime": "2017-10-18 11:17:12", "EndTime": "2017-10-18 12:22:12"}
            ],
            "Layeris_Show": false,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }
    ];

    //月模式　已测试
    var DataLoadMonth = [
        {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2015-10", "2015-11", "2015-12"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        },
        {
            "DataName": "测试数据2",
            "DataMode": "Day_Mode",
            "DataInfo": ["2015-10", "2015-11", "2016-1"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }, {
            "DataName": "测试数据3",
            "DataMode": "Day_Mode",
            "DataInfo": ["2015-10", "2015-11", "2016-1"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": false,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }];
    //添加数据函数 月模式
    function AddData_Month() {
        m_TimeLine.AddMonthData(DemoJson);
    }
    //日模式
    //日模式数据
    var DataLoadDay = [
        {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-11-12", "2016-11-13", "2016-11-14", "2016-11-15", "2016-11-16", "2016-11-19", "2016-11-20"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        },
        {
            "DataName": "测试数据2",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-11-13", "2016-11-14", "2016-11-15"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }, {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-11-12", "2016-11-13", "2016-11-14", "2016-11-15", "2016-11-16", "2016-11-19", "2016-11-20"],
            "BeginDate": "2015-10-11",
            "EndDate": "2017-03-11",
            "Layeris_Show": false,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }, {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-11-02", "2016-11-13", "2016-10-14", "2016-11-15", "2016-11-18", "2016-11-19", "2016-11-20"],
            "BeginDate": "2015-10-11",
            "EndDate": "2017-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }, {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-11-12", "2016-11-13", "2016-11-14", "2016-11-15", "2016-11-17", "2016-11-19", "2016-11-20"],
            "BeginDate": "2015-10-11",
            "EndDate": "2017-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }
        , {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-11-12", "2016-11-13", "2016-11-14", "2016-11-15", "2016-11-17", "2016-11-19", "2016-11-20"],
            "BeginDate": "2015-10-11",
            "EndDate": "2017-03-11",
            "Layeris_Show": false,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }];

    function AddData_Day() {
        m_TimeLine.AddDayData(DataLoadDay);
    }

    //年模式
    var DataLoadYear = [
        {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2010", "2011", "2012"],
            "BeginDate": "2000-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        },
        {
            "DataName": "测试数据2",
            "DataMode": "Day_Mode",
            "DataInfo": ["2010", "2011", "2012", "2013", "2014", "2015"],
            "BeginDate": "2000-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        },
        {
            "DataName": "测试数据2",
            "DataMode": "Day_Mode",
            "DataInfo": ["2010", "2011", "2012", "2013", "2014", "2015"],
            "BeginDate": "2000-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": false,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }];


    function AddData_Year() {

        m_TimeLine.AddYearData(DataLoadYear);
    }

    //分钟模式

    var DataLoadMinute = [
        {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-12-08 11:00", "2016-12-08 11:05", "2016-12-08 11:10", "2016-12-08 11:15", "2016-12-08 11:20", "2016-12-08 11:25"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        },
        {
            "DataName": "测试数据2",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-12-08 11:00", "2016-12-08 11:05", "2016-12-08 11:10", "2016-12-08 12:00", "2016-12-08 10:05"],
            "BeginDate": "2015-10-11",
            "EndDate": "2016-03-11",
            "Layeris_Show": true,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }, {
            "DataName": "测试数据1",
            "DataMode": "Day_Mode",
            "DataInfo": ["2016-12-08 11:00", "2016-12-08 11:05", "2016-12-08 11:10", "2016-12-08 12:00", "2016-12-08 10:05"],
            "BeginDate": "2015-10-11",
            "EndDate": "2017-03-11",
            "Layeris_Show": false,
            "DataRefreshTime": "2016-11-09 12:11:34"
        }];

    function AddData_Minute() {
        m_TimeLine.AddMinuteData(DataLoadMinute);
    }


    //获取获取年开始结束时间
    function Get_BeginEndTime_Year() {

    }

    //获取获取月开始结束时间
    function Get_BeginEndTime_Month() {

    }


    //获取获取日开始结束时间
    function Get_BeginEndTime_Day() {

    }

    var date = new Date(2017, 3, 11);
    var newdate = new Date(moment(date).add(1, 'day'));
    console.log("new Date(newdate)");
    console.log(new Date(newdate));

    var minute_add = 12;
    function SetAnimeDate() {
        var date_moment = moment().add(minute_add, 'minutes');
        console.log(date_moment.utc().format("YYYY-MM-DD hh:mm"));
        m_TimeLine.SetAmineDate(date_moment);
        minute_add = minute_add + 12;
    }

    function CancelAnimeDate() {
        var m_Set = m_TimeLine.SetAmineMode_End();
        if (m_Set) {
            alert("取消成功！");
        }
    }


    /**
     * 设置动画函数
     * @constructor
     */
    function SetAnimeDateArea() {
        var date_moment_begin = moment().add(0, 'minutes');
        console.log(date_moment_begin.utc().format("YYYY-MM-DD hh:mm"));
        var date_moment_end = moment().add(minute_add, 'minutes');
        console.log(date_moment_end.utc().format("YYYY-MM-DD hh:mm"));
        m_TimeLine.SetAmineMode(date_moment_begin, date_moment_end);
        minute_add = minute_add + 60;
    }
</script>
</html>