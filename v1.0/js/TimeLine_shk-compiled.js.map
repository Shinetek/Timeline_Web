{"version":3,"sources":["TimeLine_shk.js"],"names":[],"mappings":"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","file":"TimeLine_shk-compiled.js","sourcesContent":["/**\r\n * Created by liuyp on 2016/10/24.\r\n */\r\nfunction TimeLine() {\r\n\r\n    var self = this;\r\n\r\n    /**\r\n     * 当前选择日期 精确到时分秒\r\n     * @type {Date}\r\n     */\r\n    this.DateShow = new Date();\r\n\r\n    /**\r\n     *  当前用来显示的  年月日 时分秒\r\n     * @type {{Year_Show: number, Month_Show: number, Day_Show: number, Hour_Show: number, Minute_Show: number}}\r\n     */\r\n    var DATE_SHOW = {\r\n        Year_Show: 2016,\r\n        Month_Show: 1,\r\n        Day_Show: 1,\r\n        Hour_Show: 0,\r\n        Minute_Show: 0\r\n    };\r\n\r\n\r\n    //返回当前选择年月日， 所在的 数据列表 及开始时间\r\n    this.DataShowBegin = [];\r\n\r\n\r\n    /**\r\n     * 整体显示 -- 当前浏览器类型\r\n     * @type {string}\r\n     */\r\n    this.browserType = \"\";\r\n\r\n    /**\r\n     *整体显示 -- 目标div ID\r\n     * @type {string}\r\n     */\r\n    this.IDName = '';\r\n\r\n    /**\r\n     * 显示模式  默认使用月模式\r\n     * Year_Mode Month_Mode Day_Mode Minute_Mode\r\n     * @type {string}\r\n     */\r\n    this.ShowMode = \"Minute_Mode\";\r\n\r\n    /**\r\n     * 当前显示模式 是都显示TimeLineSVG\r\n     * true 显示时间轴\r\n     * false 显示时间轴\r\n     * @type {boolean}\r\n     */\r\n    this.Is_ShowSVGLine = true;\r\n\r\n\r\n    var POINT_X = {\r\n        isMove_Minute: false,\r\n        x_Minute: 0,\r\n        X_Before_Minute: -150,\r\n        m_Trans_Minute: -150\r\n    };\r\n    /* 分钟模式  鼠标 操作 变量*/\r\n\r\n    //分钟模式下 初始化显示日期\r\n    var MinuteBegin_Date = new Date(moment.utc().add(0.0, \"hours\").format(\"YYYY-MM-DD HH\").toString() + \":00:00\");\r\n\r\n\r\n    /* 日模式 鼠标 操作 变量*/\r\n    var isMove_Day = false;\r\n    var x_Day = 0;\r\n    var X_Before_Day = 0;\r\n    var m_Trans_Day = -387.5;\r\n    //日模式下显示初始化左侧显示日期\r\n    var DayBegin_Date = new Date();\r\n\r\n    /* 月模式 鼠标 操作 变量*/\r\n    var isMove_Month = false;\r\n    var x_Month = 0;\r\n    var X_Before_Month = 0;\r\n    var m_Trans_Month = -150;\r\n    var MonthBegin_Date = new Date(2009, 0, 1);\r\n\r\n    /* 年模式 鼠标 操作 变量*/\r\n    var m_Trans_Year = 50;\r\n    var isMove_Year = false;\r\n    var x_Year = 0;\r\n    var X_Before_Year = 0;\r\n\r\n    var YearShowCount = 8;\r\n    var MonthShowCount = 12;\r\n    var DayShowCount = 5;\r\n    var MinutesShowCount = 11;\r\n\r\n    /*数据图层变量*/\r\n    /**\r\n     * 当前图层列表\r\n     * @type {Array}\r\n     */\r\n\r\n\r\n    //基本数据\r\n    var m_LayerDataList = [];\r\n    var m_LayerShowTypeList = [];\r\n\r\n    var m_LayerAllModeData = [];\r\n    var m_LayerExistLayer = [];\r\n\r\n    /** 对外接口 */\r\n\r\n    /**\r\n     * 供外部调用的初始化函数\r\n     * @param DIVid\r\n     * @param m_InitMode\r\n     * @constructor\r\n     */\r\n    this.init = function (DIVid, m_InitMode) {\r\n        //获取当前浏览器类型\r\n        self.browserType = setModeIE();\r\n        //用DIVid 赋值\r\n        self.IDName = DIVid;\r\n        //对初始化的类型赋值\r\n        switch (m_InitMode) {\r\n            case \"YEAR\":\r\n            {\r\n                self.ShowMode = \"Year_Mode\";\r\n                break;\r\n            }\r\n            case \"MONTH\":\r\n            {\r\n                self.ShowMode = \"Month_Mode\";\r\n                break;\r\n            }\r\n            case \"DAY\":\r\n            {\r\n                self.ShowMode = \"Day_Mode\";\r\n                break;\r\n            }\r\n            case \"MINUTE\":\r\n            {\r\n                self.ShowMode = \"Minute_Mode\";\r\n                break;\r\n            }\r\n            default:\r\n            {\r\n                self.ShowMode = \"Day_Mode\";\r\n                //默认使用天显示 模式\r\n                break;\r\n\r\n            }\r\n\r\n        }\r\n        InitShow();\r\n        InitDateClickFunc();\r\n    };\r\n\r\n    /**\r\n     * SVG title 显示内容初始化\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    this.LoadTitleHander = function (event) {\r\n        new Title(event.getTarget().getOwnerDocument(), 12);\r\n    };\r\n\r\n    /**\r\n     * 对外接口\r\n     * 获取当前时间\r\n     * @returns {*}\r\n     * @constructor\r\n     */\r\n    this.GetShowDate = function () {\r\n        return self.DateShow;\r\n    };\r\n\r\n    /**\r\n     * 对外接口\r\n     * 获取当前时间\r\n     * @param newDate\r\n     * @returns {boolean}\r\n     * @constructor\r\n     */\r\n    this.SetShowDate = function (newDate) {\r\n        if (newDate instanceof Date) {\r\n            self.DateShow = new Date(moment.utc(newDate));\r\n            RefreshTimeShow();\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 数值修改触发函数 外部重写此函数 获取修改事件\r\n     * @constructor\r\n     */\r\n    this.DateTimeChange = function () {\r\n        $(\"#\" + self.IDName).trigger(\"DateTimeChange\", [self.DateShow]);\r\n    };\r\n\r\n    /**  内部函数  */\r\n\r\n    /**\r\n     * 整体显示 --属性新当前显示\r\n     * @constructor\r\n     */\r\n    var RefreshTimeShow = function () {\r\n        //根据当前选择时间获取 年月日\r\n        DATE_SHOW.Year_Show = self.DateShow.getUTCFullYear();\r\n        DATE_SHOW.Month_Show = self.DateShow.getMonth() + 1;\r\n        DATE_SHOW.Day_Show = self.DateShow.getDate();\r\n        DATE_SHOW.Hour_Show = self.DateShow.getHours();\r\n        DATE_SHOW.Minute_Show = self.DateShow.getMinutes();\r\n        //年月日赋值显示\r\n        document.getElementById('txt_Year').value = DATE_SHOW.Year_Show.toString();\r\n        document.getElementById('txt_Month').value = DATE_SHOW.Month_Show.toString();\r\n        document.getElementById('txt_Day').value = DATE_SHOW.Day_Show.toString();\r\n        //调用数据修改函数 ，触发外部func\r\n        self.DateTimeChange();\r\n        //根据模式重绘\r\n        switch (self.ShowMode) {\r\n            case \"Year_Mode\":\r\n            {\r\n                Year_SVGMove(0);\r\n                break;\r\n            }\r\n            case \"Month_Mode\":\r\n            {\r\n                Month_SvgMove(0);\r\n                break;\r\n            }\r\n            case \"Day_Mode\":\r\n            {\r\n                Day_SVGMove(0);\r\n                break;\r\n            }\r\n            case \"Minute_Mode\":\r\n            {\r\n                Minute_SVGMove(0);\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 添加一天\r\n     * @constructor\r\n     */\r\n    var AddDay = function () {\r\n        //DateShow 添加一天\r\n        self.DateShow = new Date(moment(self.DateShow).add(1, 'day'));\r\n        //重设位移值 年位移位置\r\n        self.m_Trans = (DATE_SHOW.Year_Show - moment(self.DateShow).year() + 5 ) * 150;\r\n\r\n        //天模式\r\n        m_Trans_Day = m_Trans_Day - 12.5;\r\n        //分钟位移位置 修改为1分钟模式\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute - 12.5 * 60 * 24;\r\n        RefreshTimeShow();\r\n    };\r\n\r\n    /**\r\n     * 添加一个月\r\n     * @constructor\r\n     */\r\n    var AddMonth = function () {\r\n        var momentStr = (  moment(self.DateShow).add(1, 'month') - moment(self.DateShow)) / 1000 / 3600 / 24;\r\n        self.DateShow = new Date(moment(self.DateShow).add(1, 'month'));\r\n        self.m_Trans = ( self.m_TransYear - moment(self.DateShow).year() + 5 ) * 150;\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute - momentStr * 12.5 * 24 * 60;\r\n        //天模式\r\n        m_Trans_Day = m_Trans_Day - 12.5 * momentStr;\r\n        RefreshTimeShow();\r\n    };\r\n\r\n    /**\r\n     * 添加一年\r\n     * @constructor\r\n     */\r\n    var AddYear = function () {\r\n        var momentStr = (moment(self.DateShow).add(1, 'year') - moment(self.DateShow)) / 1000 / 3600 / 24;\r\n\r\n        //分钟模式 位移\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute - momentStr * 12.5 * 24 * 60;\r\n        //天模式\r\n        m_Trans_Day = m_Trans_Day - 12.5 * momentStr;\r\n        //月位移 todo\r\n\r\n        //年位移\r\n        self.m_Trans = ( self.m_TransYear - moment(self.DateShow).year() + 5 ) * 150;\r\n        self.DateShow = new Date(moment(self.DateShow).add(1, 'year'));\r\n        RefreshTimeShow();\r\n    };\r\n\r\n    /**\r\n     * 减一天\r\n     * @constructor\r\n     */\r\n    var MinusDay = function () {\r\n        self.DateShow = new Date(moment(self.DateShow).add(-1, 'day'));\r\n        //分钟模式\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute + 12.5 * 60 * 24;\r\n        //天模式\r\n        m_Trans_Day = m_Trans_Day + 12.5;\r\n        RefreshTimeShow();\r\n    };\r\n\r\n    /**\r\n     * 减一个月\r\n     * @constructor\r\n     */\r\n    var MinusMonth = function () {\r\n        var momentStr = (moment(self.DateShow) - moment(self.DateShow).add(-1, 'month')) / 1000 / 3600 / 24;\r\n        self.DateShow = new Date(moment(self.DateShow).add(-1, 'month'));\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute + 12.5 * 24 * 60 * momentStr;\r\n\r\n\r\n        //天模式\r\n        m_Trans_Day = m_Trans_Day + 12.5 * momentStr;\r\n        RefreshTimeShow();\r\n    };\r\n\r\n    /**\r\n     * 减一年\r\n     * @constructor\r\n     */\r\n    var MinusYear = function () {\r\n        //年份 的天\r\n        var momentStr = (moment(self.DateShow) - moment(self.DateShow).add(-1, 'year')) / 1000 / 3600 / 24;\r\n\r\n        self.DateShow = new Date(moment.utc(self.DateShow).add(-1, 'year'));\r\n        //分钟模式\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute + momentStr * 12.5 * 24 * 60;\r\n        //天模式\r\n        m_Trans_Day = m_Trans_Day + 12.5 * momentStr;\r\n        RefreshTimeShow();\r\n    };\r\n\r\n    /**\r\n     * 初始化界面显示\r\n     * @param DIVid\r\n     * @param m_InitMode\r\n     * @constructor\r\n     */\r\n    var InitShow = function () {\r\n        var m_ID = self.IDName;\r\n        //左侧时间选择\r\n        var ShowAll =\r\n            ' <div class=\"TimeInputDiv\">'\r\n            + '<div id=\"YearInputDiv\">'\r\n            + '<div class=\"UpButton\" id=\"btn_AddYear\">'\r\n            + '<svg width=\"98\" height=\"25\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<path d=\"m25.5,20.5l23.49999,-12l23.50001,12l-47,0z\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<input class=\"TimeInput\" id=\"txt_Year\" type=\"text\" readOnly=\"true\">  '\r\n            + '<div class=\"DownButton\" id=\"btn_MinusYear\">'\r\n            + '<svg>'\r\n            + '<path transform=\"rotate(-180 50,14.5) \" d=\"m25.5,20.5l23.49999,-12l23.50001,12l-47,0z\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div id=\"MonthInputDiv\">'\r\n            + '<div class=\"UpButton\" id=\"btn_AddMonth\">'\r\n            + '<svg width=\"98\" height=\"25\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<path d=\"m10,20.5l19.99999,-12l20.00001,12l-40,0z\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<input class=\"MonthInput\" id=\"txt_Month\" type=\"text\" readOnly=\"true\">  '\r\n            + '<div class=\"DownButton\" id=\"btn_MinusMonth\">'\r\n            + '<svg width=\"98\" height=\"25\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<path transform=\"rotate(-180 30,14.5) \" d=\"m10,20.5l19.99999,-12l20.00001,12l-40,0z\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div id=\"DayInputDiv\">'\r\n            + '<div class=\"UpButton\" id=\"btn_AddDay\">'\r\n            + '<svg width=\"98\" height=\"25\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<path d=\"m10,20.5l19.99999,-12l20.00001,12l-40,0z\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<input class=\"MonthInput\" id=\"txt_Day\" type=\"text\"  readOnly=\"true\"> '\r\n            + '<div class=\"DownButton\" id=\"btn_MinusDay\">'\r\n            + '<svg width=\"98\" height=\"25\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<path transform=\"rotate(-180 30,14.5) \" d=\"m10,20.5l19.99999,-12l20.00001,12l-40,0z\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div> '\r\n            + '</div>'\r\n            + '<div class=\"AfterDiv\" id=\"btn_BeforeTime\">'\r\n            + '<svg style=\"width: 24px;height: 44px;margin-top: 26px; transform:scaleX(-1);\">'\r\n            + '<path style=\"fill: #fff ;\" d=\"M 10.240764,0 24,22 10.240764,44 0,44 13.759236,22 0,0 10.240764,0 z\"></path>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<div class=\"AfterDiv\" id=\"btn_AfterTime\">'\r\n            + '<svg style=\"width: 24px;height: 44px;margin-top: 26px; \">'\r\n            + '<path style=\"fill: #fff;\" d=\"M 10.240764,0 24,22 10.240764,44 0,44 13.759236,22 0,0 10.240764,0 z\"></path>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div class=\"TimeLineTotalDiv\" id=\"ShowTimeLine\">'\r\n            + '<div class=\"TimeLineDiv\" id=\"Show_YearDiv\">'\r\n            + '<!--时间轴部分-->'\r\n            + '<div class=\"TimeLineDiv_Inside\" id=\"ShowTimeLineDiv_Year\">'\r\n            + '<div class=\"SVGDiv_Inside\">'\r\n            + '<svg class=\"svg_ALL\" height=\"99\" id=\"SVG_Year_Total\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<!--模式选择部分-->'\r\n            + '<div class=\"TimeMode_Inner\" id=\" TimeModeDiv YearMode_Div\">'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '<div class=\"BigShowDiv    btn_ShowYear\">Years</div>'\r\n            + '<div class=\"MedShowDiv    btn_ShowMonth\">Months</div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowDay\">Days</div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowMinute\">Minutes</div>'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div class=\"TimeLineDiv\" id=\"Show_MonthDiv\" style=\"display: none\">'\r\n            + '<!--  月时间轴部分-->'\r\n            + '<div class=\"TimeLineDiv_Inside\" id=\"ShowTimeLineDiv_Month\">'\r\n            + '<svg class=\"svg_ALL\" height=\"100\" id=\"SVG_Total\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<g id=\"ShowSVG\" transform=\"translate(0,6)\" class=\"x aixs\"></g>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<!--  月时间轴选择部分 -->'\r\n            + '<div id=\"MonthMode_Div\" class=\" TimeModeDiv TimeMode_Inner\">'\r\n            + '<div class=\"SmallFillDiv  \"></div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowYear\">Years</div>'\r\n            + '<div class=\"BigShowDiv    btn_ShowMonth\">Months</div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowDay\">Days</div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowMinute\">Minutes</div>'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div class=\"TimeLineDiv\" id=\"Show_DayDiv\" style=\"display: none\">'\r\n            + '<div class=\"TimeLineDiv_Inside\" id=\"ShowTimeLineDiv_Day\">'\r\n            + '<svg class=\"svg_ALL\" height=\"100\" id=\"SVG_Day_Total\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<g id=\"ShowSVG_Day\" transform=\"translate(0,6)\" class=\"x aixs \">'\r\n            + '</g>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<div class=\" TimeModeDiv TimeMode_Inner\" id=\"DayMode_Div\">'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowYear \">Years</div>'\r\n            + '<div class=\"MedShowDiv    btn_ShowMonth\">Months</div>'\r\n            + '<div class=\"BigShowDiv    btn_ShowDay  \">Days</div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowMinute\">Minutes</div>'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div class=\"TimeLineDiv\" id=\"Show_MinuteDiv\" style=\"display: none\">'\r\n            + '<div class=\"TimeLineDiv_Inside\" id=\"ShowTimeLineDiv_Minute\">'\r\n            + '<svg class=\"svg_ALL\" height=\"100\" id=\"SVG_Minute_Total\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<g id=\"ShowSVG_Minute\" transform=\"translate(0,6)\" class=\"x aixs \">'\r\n            + '</g>'\r\n            + '</svg>'\r\n            + '</div>'\r\n            + '<div class=\" TimeModeDiv TimeMode_Inner\" id=\"MinuteMode_Div\">'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '<div class=\"SmallShowDiv  btn_ShowYear \">Years</div>'\r\n            + '<div class=\"SmallShowDiv    btn_ShowMonth\">Months</div>'\r\n            + '<div class=\"MedShowDiv    btn_ShowDay  \">Days</div>'\r\n            + '<div class=\"BigShowDiv  btn_ShowMinute\">Minutes</div>'\r\n            + '<div class=\"SmallFillDiv \"></div>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '</div>'\r\n            + '<div class=\"ShowHidebtnDiv\" id=\"ShowHidebtn\">'\r\n            + '<svg width=\"25\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\">'\r\n            + '<g>'\r\n            + '<title>展开/隐藏</title>'\r\n            + '<path id=\"svg_1\" d=\"m3,55.94447l19,0l0,4l-19,0l0,-4z\" stroke-width=\"0\" stroke=\"#000\" fill=\"#fff\"/>'\r\n            + '<path id=\"svg_2\" d=\"m3,47.94447l19,0l0,4l-19,0l0,-4z\" stroke-width=\"0\" stroke=\"#000\" fill=\"#fff\"/>'\r\n            + '<path id=\"svg_3\" d=\"m3,39.94447l19,0l0,4l-19,0l0,-4z\" stroke-width=\"0\" stroke=\"#000\" fill=\"#fff\"/>'\r\n            + '</svg>'\r\n            + '</div>';\r\n\r\n        var m_ShowDiv = document.getElementById(m_ID);\r\n        //初始化\r\n        m_ShowDiv.innerHTML = ShowAll;\r\n\r\n        try {\r\n            m_ShowDiv.style.position = \"fixed\";\r\n            m_ShowDiv.style.bottom = 0;\r\n            m_ShowDiv.style.left = 0;\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n        //根据窗口设置宽度\r\n        GetFullModeWidth(m_ID);\r\n    };\r\n\r\n    /**\r\n     * 初始化显示左侧年月日 并初始化赋值点击事件\r\n     * @constructor\r\n     */\r\n    var InitDateClickFunc = function () {\r\n        //初始化时间\r\n        self.DateShow = new Date();\r\n        DATE_SHOW.Year_Show = self.DateShow.getUTCFullYear();\r\n        DATE_SHOW.Month_Show = self.DateShow.getUTCMonth() + 1;\r\n        DATE_SHOW.Day_Show = self.DateShow.getUTCDate();\r\n        DATE_SHOW.Hour_Show = self.DateShow.getUTCHours();\r\n        DATE_SHOW.Minute_Show = self.DateShow.getUTCMinutes();\r\n\r\n        /*初始化点击事件*/\r\n        //年月日 加一 函数赋值\r\n        var m_btn_AddYear = document.getElementById(\"btn_AddYear\");\r\n        m_btn_AddYear.onclick = AddYear;\r\n        var btn_AddMonth = document.getElementById(\"btn_AddMonth\");\r\n        btn_AddMonth.onclick = AddMonth;\r\n        var btn_AddDay = document.getElementById(\"btn_AddDay\");\r\n        btn_AddDay.onclick = AddDay;\r\n\r\n        //年月日 减一 函数赋值\r\n        var btn_MinusYear = document.getElementById(\"btn_MinusYear\");\r\n        btn_MinusYear.onclick = MinusYear;\r\n        var btn_MinusMonth = document.getElementById(\"btn_MinusMonth\");\r\n        btn_MinusMonth.onclick = MinusMonth;\r\n        var btn_MinusDay = document.getElementById(\"btn_MinusDay\");\r\n        btn_MinusDay.onclick = MinusDay;\r\n\r\n        //初始化设置时间选择值 重新 赋值\r\n        document.getElementById('txt_Year').value = DATE_SHOW.Year_Show.toString();\r\n        document.getElementById('txt_Month').value = DATE_SHOW.Month_Show.toString();\r\n        document.getElementById('txt_Day').value = DATE_SHOW.Day_Show.toString();\r\n\r\n        //设置 年TimeLine 滚动事件\r\n        var m_ShowTimeLineDiv_Year = document.getElementById(\"ShowTimeLineDiv_Year\");\r\n        m_ShowTimeLineDiv_Year.onmousedown = GetMouseDown_Year;\r\n        m_ShowTimeLineDiv_Year.onmouseup = GetMouseUP_Year;\r\n        m_ShowTimeLineDiv_Year.onmouseout = GetMouseOut_Year;\r\n        m_ShowTimeLineDiv_Year.onmousemove = MouseMove_Year;\r\n\r\n        //设置 月TimeLine 滚动事件\r\n        var m_ShowTimeLineDiv_Month = document.getElementById(\"ShowTimeLineDiv_Month\");\r\n        m_ShowTimeLineDiv_Month.onmousedown = GetMouseDown_Month;\r\n        m_ShowTimeLineDiv_Month.onmouseup = GetMouseUP_Month;\r\n        m_ShowTimeLineDiv_Month.onmouseout = GetMouseOut_Month;\r\n        m_ShowTimeLineDiv_Month.onmousemove = MouseMove_Month;\r\n\r\n        //设置 日TimeLine 滚动事件\r\n        var m_ShowTimeLineDiv_Day = document.getElementById(\"ShowTimeLineDiv_Day\");\r\n        m_ShowTimeLineDiv_Day.onmousedown = GetMouseDown_Day;\r\n        m_ShowTimeLineDiv_Day.onmouseup = GetMouseUP_Day;\r\n        m_ShowTimeLineDiv_Day.onmouseout = GetMouseOut_Day;\r\n        m_ShowTimeLineDiv_Day.onmousemove = MouseMove_Day;\r\n\r\n        //设置 分钟 TimeLine 滚动事件\r\n        var m_ShowTimeLineDiv_Minute = document.getElementById(\"ShowTimeLineDiv_Minute\");\r\n        m_ShowTimeLineDiv_Minute.onmousedown = GetMouseDown_Minute;\r\n        m_ShowTimeLineDiv_Minute.onmouseup = GetMouseUP_Minute;\r\n        m_ShowTimeLineDiv_Minute.onmouseout = GetMouseOut_Minute;\r\n        m_ShowTimeLineDiv_Minute.onmousemove = MouseMove_Minute;\r\n\r\n        //设置点击事件\r\n        var m_btn_ShowYear = document.getElementsByClassName('btn_ShowYear');\r\n        for (var i = 0; i < m_btn_ShowYear.length; i++) {\r\n            m_btn_ShowYear[i].onclick = ShowYearMode;\r\n        }\r\n\r\n        var m_btn_ShowMonth = document.getElementsByClassName('btn_ShowMonth');\r\n        for (var k = 0; k < m_btn_ShowMonth.length; k++) {\r\n            m_btn_ShowMonth[k].onclick = ShowMonthMode;\r\n        }\r\n\r\n        var m_btn_ShowDay = document.getElementsByClassName('btn_ShowDay');\r\n        for (var j = 0; j < m_btn_ShowDay.length; j++) {\r\n            m_btn_ShowDay[j].onclick = ShowDayMode;\r\n        }\r\n\r\n        var m_btn_ShowMinute = document.getElementsByClassName('btn_ShowMinute');\r\n        for (var w = 0; w < m_btn_ShowMinute.length; w++) {\r\n            m_btn_ShowMinute[w].onclick = ShowMinuteMode;\r\n        }\r\n\r\n        //设置左右点击事件\r\n        //向左减一天\r\n        var btn_MinusDay_Left = document.getElementById(\"btn_BeforeTime\");\r\n        btn_MinusDay_Left.onclick = MinusDay;\r\n        //向右加一天\r\n        var btn_AddDay_Right = document.getElementById(\"btn_AfterTime\");\r\n        btn_AddDay_Right.onclick = AddDay;\r\n\r\n        //伸缩点击事件\r\n        var m_btn_ShowTimeLine = document.getElementById('ShowHidebtn');\r\n        m_btn_ShowTimeLine.onclick = ClickShowAndHide;\r\n        //调用初始化函数\r\n        InitTimeLineShow();\r\n    };\r\n\r\n    /**\r\n     * 界面重绘 重新计算样式\r\n     */\r\n    $(window).resize(function () {\r\n        //判断当前显示模式 是否显示了时间轴\r\n        if (self.Is_ShowSVGLine) {\r\n            //若为全屏模式 则重新计算时间轴 及总控件宽度\r\n            GetFullModeWidth(self.IDName);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * 获取当前用于显示的浏览器类型\r\n     * @returns {*}\r\n     */\r\n    var setModeIE = function () {\r\n        var explorer = window.navigator.userAgent;\r\n\r\n        if (navigator.userAgent.indexOf(\"Trident\") > 0 || navigator.userAgent.indexOf(\"Edge\") > 0) {\r\n            return \"Edge\";\r\n        }\r\n        if (navigator.userAgent.indexOf(\"MSIE\") > 0) {\r\n            return \"MSIE\";\r\n        }\r\n        if (navigator.userAgent.indexOf(\"Firefox\") > 0) {\r\n            return \"Firefox\";\r\n        }\r\n        if (explorer.indexOf(\"Chrome\") >= 0) {\r\n            return \"Chrome\";\r\n        }\r\n        if (navigator.userAgent.indexOf(\"Safari\") > 0) {\r\n            return \"Safari\";\r\n        }\r\n        if (navigator.userAgent.indexOf(\"Camino\") > 0) {\r\n            return \"Camino\";\r\n        }\r\n        if (navigator.userAgent.indexOf(\"Gecko/\") > 0) {\r\n            return \"Gecko\";\r\n        }\r\n        if (explorer.indexOf(\"Opera\") >= 0) {\r\n            return \"Opera\";\r\n        }\r\n        return \"unknown\";\r\n    };\r\n\r\n    /**\r\n     * 根据界面设置宽度\r\n     * @constructor\r\n     */\r\n    var GetFullModeWidth = function () {\r\n        var m_browserType = self.browserType;\r\n        var m_DIVID = self.IDName;\r\n        if (m_DIVID === '') {\r\n            return;\r\n        }\r\n\r\n        var m_ClassADD = document.getElementById(m_DIVID);\r\n        var TimeLineTotalDIV = document.getElementById(\"ShowTimeLine\");\r\n        var TimeLineList = document.getElementsByClassName(\"svg_ALL\");\r\n        var Total_Witdh = 0;\r\n\r\n        switch (m_browserType) {\r\n\r\n            case 'Chrome':\r\n            {\r\n                // 总宽度\r\n                var TotalWidth = (document.documentElement.scrollWidth > document.documentElement.clientWidth)\r\n                    ? document.documentElement.scrollWidth : document.documentElement.scrollWidth;\r\n                Total_Witdh = TotalWidth;\r\n                //设置整体控件宽度\r\n                if (TotalWidth > 380) {\r\n                    document.getElementById(m_DIVID).style.width = TotalWidth;\r\n                } else {\r\n                    document.getElementById(m_DIVID).style.width = 380;\r\n                }\r\n\r\n                //右侧SVGTimeLine高度\r\n                var SVGWitdh = 0;\r\n                SVGWitdh = TotalWidth - 490;\r\n                //设置TimeLine宽度\r\n                TimeLineTotalDIV.style.width = TotalWidth - 360;\r\n\r\n                //SVG列表 设置宽度\r\n                for (var j = 0; j < TimeLineList.length; j++) {\r\n                    TimeLineList[j].style.width = SVGWitdh;\r\n                }\r\n                break;\r\n            }\r\n            //chrome 浏览器\r\n            case 'Firefox':\r\n            {\r\n                // 总宽度\r\n                var TotalWidth_fireFox = document.documentElement.clientWidth - 20;\r\n                Total_Witdh = TotalWidth_fireFox;\r\n                //设置TimeLine DIV宽度\r\n                if (TotalWidth_fireFox > 360) {\r\n                    m_ClassADD.style.width = TotalWidth_fireFox + \"px\";\r\n                } else {\r\n                    m_ClassADD.style.width = 360 + \"px\";\r\n                }\r\n                //SVG列表 设置宽度\r\n                var SVGWitdh_fireFox = TotalWidth_fireFox - 490;\r\n                for (var k = 0; k < TimeLineList.length; k++) {\r\n                    TimeLineList[k].style.width = SVGWitdh_fireFox + \"px\";\r\n                }\r\n                //右侧SVGTimeLine宽度\r\n                TimeLineTotalDIV.style.width = (TotalWidth_fireFox - 360) + \"px\";\r\n                break;\r\n            }\r\n            case \"MSIE\":\r\n            {\r\n                // 总宽度\r\n                var TotalWidth_MSIE = document.documentElement.clientWidth - 20;\r\n                Total_Witdh = TotalWidth_MSIE;\r\n                //设置TimeLine DIV宽度\r\n                if (TotalWidth_MSIE > 360) {\r\n                    m_ClassADD.style.width = TotalWidth_MSIE + \"px\";\r\n                } else {\r\n                    m_ClassADD.style.width = 360 + \"px\";\r\n                }\r\n                //SVG列表 设置宽度\r\n                var SVGWitdh_MSIE = TotalWidth_MSIE - 490;\r\n                for (var ti = 0; ti < TimeLineList.length; ti++) {\r\n                    TimeLineList[ti].style.width = SVGWitdh_MSIE + \"px\";\r\n                }\r\n                //右侧SVGTimeLine宽度\r\n                TimeLineTotalDIV.style.width = (TotalWidth_MSIE - 360) + \"px\";\r\n                break;\r\n            }\r\n            case 'Edge':\r\n            {\r\n                var curW = document.documentElement.clientWidth || document.body.clientWidth;\r\n                //var curH = document.documentElement.clientHeight || document.body.clientHeight;\r\n                //  console.log('Edge:' + curW);\r\n\r\n                // 总宽度\r\n                var TotalWidth_Edge = curW - 20;\r\n                Total_Witdh = TotalWidth_Edge;\r\n                //设置TimeLine DIV宽度\r\n                if (TotalWidth_Edge > 360) {\r\n                    m_ClassADD.style.width = TotalWidth_Edge + \"px\";\r\n                } else {\r\n                    m_ClassADD.style.width = 360 + \"px\";\r\n                }\r\n                //SVG列表 设置宽度\r\n                var SVGWitdh_Edge = TotalWidth_Edge - 490;\r\n                for (var tj = 0; tj < TimeLineList.length; tj++) {\r\n                    TimeLineList[tj].style.width = SVGWitdh_Edge + \"px\";\r\n                }\r\n                //右侧SVGTimeLine宽度\r\n                TimeLineTotalDIV.style.width = (TotalWidth_Edge - 360) + \"px\";\r\n                break;\r\n            }\r\n            default:\r\n            {\r\n                break;\r\n            }\r\n        }\r\n\r\n        //495\r\n        var ShowTimeLine = document.getElementsByClassName(\"TimeLineTotalDiv\");\r\n        if (Total_Witdh < 495) {\r\n            for (var i = 0; i < ShowTimeLine.length; i++) {\r\n                ShowTimeLine[i].style.display = \"none\";\r\n            }\r\n            self.Is_ShowSVGLine = false;\r\n        } else {\r\n            //var ShowTimeLine = document.getElementsByClassName(\"TimeLineTotalDiv\");\r\n            for (var t1 = 0; t1 < ShowTimeLine.length; t1++) {\r\n                ShowTimeLine[t1].style.display = \"block\";\r\n            }\r\n            self.Is_ShowSVGLine = true;\r\n        }\r\n        //根据新长度计算当前显示宽度值\r\n        if (Total_Witdh !== 0 && Total_Witdh > 0) {\r\n            // console.log(\"屏幕总宽度：\" + Total_Witdh);\r\n            var CountWidth = Total_Witdh - 300 - 150;\r\n            //年的 10年 一年25\r\n            YearShowCount = Math.ceil(CountWidth / 10 / 25) + 1;\r\n            //月 一年 12个月 一个月12.5\r\n            MonthShowCount = Math.ceil(CountWidth / 12.5 / 12) + 2;\r\n            //day 一个月 29天\r\n            DayShowCount = Math.ceil(CountWidth / 29 / 12.5) + 1;\r\n            //分钟 一小时  12个 5分钟 1个12.5\r\n            MinutesShowCount = Math.ceil(CountWidth / 12 / 12.5) + 1;\r\n            //console.log(YearShowCount + \":\" + MonthShowCount + \":\" + DayShowCount + \":\" + MinutesShowCount);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * 初始化 显示TimeLine div\r\n     * @constructor\r\n     */\r\n    var InitTimeLineShow = function () {\r\n        switch (self.ShowMode) {\r\n            case \"Year_Mode\":\r\n            {\r\n                Year_SVGMove(0);\r\n                ShowYearMode();\r\n                break;\r\n            }\r\n            case \"Month_Mode\":\r\n            {\r\n                InitMonthTimeLineShow(2009);\r\n                ShowMonthMode();\r\n                break;\r\n            }\r\n            case \"Day_Mode\":\r\n            {\r\n                Day_SVGMove(0);\r\n                ShowDayMode();\r\n                break;\r\n            }\r\n            case \"Minute_Mode\":\r\n            {\r\n\r\n                Minute_SVGMove(0);\r\n                ShowMinuteMode();\r\n                break;\r\n            }\r\n            default:\r\n            {\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 设置年\r\n     * @param Year\r\n     * @returns {boolean}\r\n     * @constructor\r\n     */\r\n    var SetShowYear = function (Year) {\r\n        if (Year) {\r\n            DATE_SHOW.Year_Show = parseInt(Year).toString();\r\n            self.DateShow = new Date(DATE_SHOW.Year_Show, DATE_SHOW.Month_Show - 1, DATE_SHOW.Day_Show, DATE_SHOW.Hour_Show, DATE_SHOW.Minute_Show, 0);\r\n            RefreshTimeShow();\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 设置年月  函数\r\n     * @param enevt\r\n     * @returns {boolean}\r\n     * @constructor\r\n     */\r\n    var SetShowMonth = function (enevt) {\r\n        //  console.log('SetShowMonth');\r\n        var TimeStr = enevt.getAttribute(\"value\");\r\n        var new_Year = TimeStr.split(\"-\")[0];\r\n        var new_Month = TimeStr.split(\"-\")[1];\r\n        if (new_Year && new_Month) {\r\n            DATE_SHOW.Year_Show = parseInt(new_Year).toString();\r\n            DATE_SHOW.Month_Show = parseInt(new_Month).toString();\r\n            //设置年月日\r\n            self.DateShow = new Date(DATE_SHOW.Year_Show, DATE_SHOW.Month_Show - 1, DATE_SHOW.Day_Show, DATE_SHOW.Hour_Show, DATE_SHOW.Minute_Show, 0);\r\n            RefreshTimeShow();\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 获取分钟鼠标 down事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseDown_Minute = function (event) {\r\n        POINT_X.isMove_Minute = true;\r\n        POINT_X.x_Minute = event.clientX;\r\n        POINT_X.X_Before_Minute = POINT_X.x_Minute;\r\n    };\r\n\r\n    /**\r\n     * 获取分钟鼠标 UP事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseUP_Minute = function (event) {\r\n        POINT_X.isMove_Minute = false;\r\n    };\r\n\r\n    /**\r\n     * 获取分钟鼠标 移出事件\r\n     * @constructor\r\n     */\r\n    var GetMouseOut_Minute = function () {\r\n        //若非火狐 则移动\r\n        if (self.browserType !== \"Firefox\" && self.browserType !== 'Edge') {\r\n            POINT_X.isMove_Minute = false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 分钟模式 -- 鼠标拖动位移\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var MouseMove_Minute = function (event) {\r\n        //计算拖动位移\r\n        if (POINT_X.isMove_Minute) {\r\n            POINT_X.x_Minute = event.clientX;\r\n            var DrgNum = POINT_X.X_Before_Minute - POINT_X.x_Minute;\r\n            if (DrgNum >= 1 || DrgNum <= -1) {\r\n                POINT_X.X_Before_Minute = POINT_X.x_Minute;\r\n                Minute_SVGMove(DrgNum);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 分钟模式 -- 设置点击事件\r\n     * @constructor\r\n     */\r\n    var Minute_ClickFucn = function () {\r\n        //分钟点击事件\r\n        var m_Btn_MinuteRectList = document.getElementsByClassName('Btn_MinuteRect');\r\n        for (var t = 0; t < m_Btn_MinuteRectList.length; t++) {\r\n            m_Btn_MinuteRectList[t].onclick = function () {\r\n                MinuteRectOnClick(this);\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 分钟模式 -- 鼠标拖动等事件中 重绘界面 移动界面\r\n     * 向前为正 ，向后为负\r\n     * @param trans\r\n     * @constructor\r\n     */\r\n    var Minute_SVGMove = function (trans) {\r\n\r\n        //用于整体显示的SVG InnerHTML\r\n        var SVG_Show = '';\r\n\r\n        //全局变量 修改\r\n        POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute - trans;\r\n\r\n        //向后拖动\r\n        while (POINT_X.m_Trans_Minute > 0) {\r\n            POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute - 12 * 12.5 * 5;\r\n            //减一个小时\r\n            MinuteBegin_Date.setHours(MinuteBegin_Date.getHours() - 1);\r\n        }\r\n        //向前拖动\r\n        while (POINT_X.m_Trans_Minute < -60 * 12.5) {\r\n            POINT_X.m_Trans_Minute = POINT_X.m_Trans_Minute + 12 * 12.5 * 5;\r\n            //加1小时\r\n            MinuteBegin_Date.setHours(MinuteBegin_Date.getHours() + 1);\r\n        }\r\n        //每个月的位移 初始化位0\r\n        var Month_Trans = POINT_X.m_Trans_Minute;\r\n        //初始时间为2016年1月 当前月\r\n        var CountDate = MinuteBegin_Date;\r\n        //当前选择日期 str\r\n        var DateShowNowStr = moment(self.DateShow).utc().format('YYYY-MM-DD HH:mm');\r\n        //小时份循环\r\n\r\n        var is_GutiarFlag = false;\r\n        //小时开始 绘制 21个小时\r\n        for (var i = 0; i < MinutesShowCount; i++) {\r\n            //时间 指针 （当前显示时间）\r\n            var TimeGar = '';\r\n\r\n            var SVG_Hour = '<g class=\"tick_Total_Year\" transform=\"translate(' + Month_Trans + ')\">' +\r\n                '<line x1=\"0\" x2=\"0\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>';\r\n            var HourNow = new Date(moment(CountDate).format(\"YYYY-MM-DD HH:mm\"));\r\n            //每一个小时 中 1 min循环    一小时12\r\n            for (var j = 0; j < 60; j++) {\r\n                //每一个小时中 每5min的位移\r\n                var Minute_Trans = (j * 12.5).toString();\r\n                //根据时间计算当前块显示 DATE YYYY-MM-dd\r\n                var DayTimeStr = moment(HourNow).utc().format('YYYY-MM-DD HH:mm');\r\n                //根据时间加载数据 svg\r\n                var Data_SVG = GetMinuteMode_DataShowList(DayTimeStr, Minute_Trans);\r\n\r\n                //根据动画模式 设置是否需要显示动画模块 V1.1 20170321\r\n                var Trans_SVG = GetMinuteMode_AnimeDateList(DayTimeStr, Minute_Trans);\r\n\r\n                //  若非动画模式 则按照原有选择时间进行处理\r\n                if ((!self.AnimeMode) && (!is_GutiarFlag)) {\r\n                    // 是否为当前显示 时分秒\r\n                    var item = HourNow - self.DateShow;\r\n                    //若指针时间在范围内 显示指针\r\n                    if (300000 > item && item >= 0 && TimeGar === '') {\r\n                        is_GutiarFlag = true;\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_guitarpick\" '\r\n                            + ' transform=\"translate(' + (Minute_Trans - 8) + ',-10)\">'\r\n                            + '<title>' + DateShowNowStr + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n                    }\r\n                }\r\n\r\n\r\n                //若为动画模式 对 TimeGar 重新赋值\r\n                if (self.AnimeMode === true && (!is_GutiarFlag)) {\r\n                    TimeGar = \"\";\r\n                    var Amineitem = moment(HourNow) - self.AnimeDate;\r\n                    if (300000 > Amineitem && Amineitem >= 0 && TimeGar === \"\") {\r\n                        is_GutiarFlag = true;\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_Anime_guitarpick\" '\r\n                            + ' transform=\"translate(' + (Minute_Trans - 8) + ',-10)\">'\r\n                            + '<title>' + DateShowNowStr + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n\r\n                    }\r\n                }\r\n\r\n                //根据时间 初始化 基础svg\r\n                var SVG_Day = '<g class=\"tick_Year_One\" transform=\"translate(' + Minute_Trans + ')\" >'\r\n                    + '<rect class=\"DayRect Btn_MinuteRect\" x=\"0.2\" y=\"0\" width=\"12.5\" height=\"55\" value=\"' + DayTimeStr + '\">'\r\n                    + '<title>' + DayTimeStr + '</title>'\r\n                    + '</rect>'\r\n                    + '<line class=\"tick_dot\" x1=\"12\" x2=\"12\" y1=\"0\" y2=\"52\"></line>'\r\n                    + '</g>';\r\n                //SVG_Hour = SVG_Hour + Data_SVG + SVG_Day + TimeGar;\r\n\r\n                SVG_Hour = SVG_Hour + Data_SVG + SVG_Day;\r\n                if (self.AnimeMode) {\r\n                    SVG_Hour = SVG_Hour + Trans_SVG;\r\n                }\r\n                if (Minute_Trans % (12.5 * 5) === 0) {\r\n                    if (Minute_Trans % (12.5 * 5 * 2) === 0) {\r\n                        SVG_Hour = SVG_Hour\r\n                            + '<line x1=\"' + Minute_Trans + '\" x2=\"' + Minute_Trans + '\" y1=\"20\" y2=\"55\" class=\"tick_10DayLine\"'\r\n                            + ' ></line>';\r\n                    } else {\r\n                        SVG_Hour = SVG_Hour\r\n                            + '<line x1=\"' + Minute_Trans + '\" x2=\"' + Minute_Trans + '\" y1=\"40\" y2=\"55\" class=\"tick_10DayLine\"'\r\n                            + ' ></line>';\r\n                    }\r\n                }\r\n\r\n                // 加5min\r\n                HourNow.setMinutes(HourNow.getMinutes() + 1);\r\n            }\r\n            Month_Trans = 60 * 12.5 + Month_Trans;\r\n            var Width = 60 * 12.5;\r\n            var TimeHourShow = moment(CountDate).utc().format(\"YYYY-MM-DD HH:mm\");\r\n            if ((CountDate).getUTCHours() === 0) {\r\n                TimeHourShow = moment(CountDate).utc().format(\"YYYY-MM-DD\");\r\n            } else {\r\n                TimeHourShow = moment(CountDate).utc().format(\"HH:mm\");\r\n            }\r\n            var Month_End = '<g transform=\"translate(0)\">'\r\n                + '<rect x=\"0\" y=\"55\" width=\"' + Width + '\" height=\"25\" class=\"Rect_White\"/>'\r\n                + '<text x=\"12\" y=\"73\" class=\"Month_Text_Show\">' + TimeHourShow + '</text>'\r\n                + '</g>'\r\n                + '<g>'\r\n                + '<circle cx=\"0\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                + '<circle cx=\"' + Width + '\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                + '</g>'\r\n                + '<line x1=\"' + Width + '\" x2=\"' + Width + '\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>'\r\n                + '</g>';\r\n            SVG_Hour = SVG_Hour + TimeGar + Month_End;\r\n\r\n            //小时显示完结\r\n            SVG_Show = SVG_Show + SVG_Hour;\r\n            //时间相加\r\n            CountDate = new Date(moment(CountDate).add(1, 'hour'));\r\n        }\r\n        //时间相加\r\n        var ShowTimeLine = document.getElementById(\"ShowSVG_Minute\");\r\n\r\n        //IE显示处理\r\n        if (self.browserType !== \"MSIE\") {\r\n            ShowTimeLine.innerHTML = SVG_Show;\r\n        } else {\r\n            $(\"#ShowSVG_Day\").append(SVG_Show);\r\n        }\r\n        //ShowTimeLine.innerHTML = SVG_Show;\r\n        //重新设置分钟点击\r\n        Minute_ClickFucn();\r\n    };\r\n\r\n    /**\r\n     * 分钟模式 -- 单日点击事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var MinuteRectOnClick = function (event) {\r\n        var Tag = event.getAttribute(\"value\");\r\n        var ClickDate = new Date(moment.utc(Tag));\r\n        self.SetShowDate(ClickDate);\r\n    };\r\n\r\n\r\n    /**\r\n     * 分钟模式 -- 获取月模式的数据显示SVG 内容函数\r\n     * @param Show_DayDate\r\n     * @param ShowTransLate\r\n     * @returns {*}\r\n     * @constructor\r\n     */\r\n    var GetMinuteMode_DataShowList = function (Show_DayDate, ShowTransLate) {\r\n\r\n        Show_DayDate = Show_DayDate.toString();\r\n        //若数据长度为0 则返回空\r\n        if (m_LayerAllModeData.length === 0 || !m_LayerAllModeData.length) {\r\n            return '';\r\n        }\r\n        //数据整体svg\r\n        var ShowLayer_DataSVG = '<g style=\"width: 12px;height: 40px;fill:#5F5F01\" class=\"tick_Data_Show\"'\r\n            + ' transform=\"translate(' + ShowTransLate + ')\">';\r\n\r\n        //日期格式赋值\r\n        //是否显示列表\r\n        var DataMomentBegin = moment.utc(Show_DayDate);\r\n        var DataMomentEnd = moment.utc(Show_DayDate).add(1.0, 'minute');\r\n        //查找是否存在数据\r\n        var IsDataShowList = CheckDataTimeExistStatus_Minute(DataMomentBegin, DataMomentEnd, DataMomentEnd - DataMomentBegin);\r\n\r\n        //判定是否有数据条填充 若无填充 则返回空值\r\n        var IS_ShowTag = false;\r\n        //生成基于 数据的是否显示Ture False 列表　使用列表初始化显示\r\n        var rect_Height = Math.round(40 / m_LayerAllModeData.length, 2);\r\n        if (rect_Height > 10) {\r\n            rect_Height = 10;\r\n        }\r\n        for (var i = 0; i < m_LayerAllModeData.length; i++) {\r\n            var DateRect = '';\r\n            var Rect_Y = i * rect_Height;\r\n            //生成RECT 样式\r\n            if (IsDataShowList[i].isExist === true) {\r\n                //获取当前图层是否显示信息\r\n                var Ishow = IsDataShowList[i].isShow;\r\n                var RectLineEnd = Rect_Y + rect_Height - 0.4;\r\n                //根据显示情况\r\n                if (Ishow) {\r\n                    IS_ShowTag = true;\r\n                    //若该图层显示 则为蓝色\r\n                    DateRect = '<rect class=\"Rect_Data_Show\" x=\"-0.2\" y=\"' + Rect_Y + '\" width=\"12.7\" height=\"' + rect_Height + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                } else {\r\n                    IS_ShowTag = true;\r\n                    //不显示则为灰色\r\n                    DateRect = '<rect class=\"Rect_Data_Hide\" x=\"0\" y=\"' + Rect_Y + '\" width=\"12.5\" height=\"' + rect_Height + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                }\r\n            } else {\r\n                //若没有数据 则为空\r\n                DateRect = '';\r\n            }\r\n            //组成矩阵\r\n            ShowLayer_DataSVG = ShowLayer_DataSVG + DateRect;\r\n        }\r\n        ShowLayer_DataSVG = ShowLayer_DataSVG + '</g>';\r\n        if (IS_ShowTag === false) {\r\n            ShowLayer_DataSVG = '';\r\n        }\r\n        return ShowLayer_DataSVG;\r\n    };\r\n    /*分钟模式 时间轴部分 end*/\r\n\r\n\r\n    /*日模式 日时间轴部分 begin*/\r\n\r\n\r\n    /**\r\n     * 日模式  DAY的DIV中 鼠标按下 触发函数\r\n     * @constructor\r\n     */\r\n    var GetMouseDown_Day = function (event) {\r\n        isMove_Day = true;\r\n        x_Day = event.clientX;\r\n        X_Before_Day = x_Day;\r\n    };\r\n\r\n    /**\r\n     * 日模式  DAY的DIV中 鼠标抬起  触发函数\r\n     * @constructor\r\n     */\r\n    var GetMouseUP_Day = function (event) {\r\n        isMove_Day = false;\r\n    };\r\n\r\n    /**\r\n     * 日模式  鼠标移出DAY的DIV 触发函数\r\n     * @constructor\r\n     */\r\n    var GetMouseOut_Day = function () {\r\n        if (self.browserType !== \"Firefox\" && self.browserType !== 'Edge') {\r\n            isMove_Day = false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 日模式 -- 鼠标拖动位移 重新计算SVG  函数\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var MouseMove_Day = function (event) {\r\n        //计算拖动位移\r\n        if (isMove_Day) {\r\n            x_Day = event.clientX;\r\n            var DrgNum = X_Before_Day - x_Day;\r\n            if (DrgNum >= 1 || DrgNum <= -1) {\r\n                X_Before_Day = x_Day;\r\n                Day_SVGMove(DrgNum);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 日模式 -- 设置点击事件\r\n     * @constructor\r\n     */\r\n    var Day_ClickFucn = function () {\r\n\r\n        //日点击事件\r\n        var m_Btn_DayRectList = document.getElementsByClassName('Btn_DayRect');\r\n        for (var t = 0; t < m_Btn_DayRectList.length; t++) {\r\n            m_Btn_DayRectList[t].onclick = function () {\r\n                DayRectOnClick(this);\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 日模式 -- 鼠标拖动等事件中 重绘界面 移动界面 向前为正 ，向后为负\r\n     * @param trans\r\n     * @constructor\r\n     */\r\n    var Day_SVGMove = function (trans) {\r\n            //界面显示2个月\r\n            var SVG_Show = '';\r\n            //每个月的位移 初始化位0\r\n            m_Trans_Day = m_Trans_Day - trans;\r\n\r\n            //向后拖动\r\n            while (m_Trans_Day > 0) {\r\n                //计算长度\r\n                var BeforeMonthLength = (new Date(DayBegin_Date.getFullYear(), (DayBegin_Date.getMonth() ), 0).getDate()) * 12.5;\r\n                m_Trans_Day = m_Trans_Day - BeforeMonthLength;\r\n                //减一个月\r\n                DayBegin_Date.setMonth(DayBegin_Date.getMonth() - 1);\r\n            }\r\n            //向前拖动\r\n            var MonthLength = -(new Date(DayBegin_Date.getFullYear(), (DayBegin_Date.getMonth() + 1), 0).getDate()) * 12.5;\r\n            while (m_Trans_Day < MonthLength) {\r\n                m_Trans_Day = m_Trans_Day - MonthLength;\r\n                DayBegin_Date.setMonth(DayBegin_Date.getMonth() + 1);\r\n                //计算长度\r\n                MonthLength = -(new Date(DayBegin_Date.getFullYear(), (DayBegin_Date.getMonth() + 1), 0).getDate()) * 12.5;\r\n            }\r\n            var Day_Trans = m_Trans_Day;\r\n            //初始时间为2016年1月 当前月\r\n            var CountDate = new Date(DayBegin_Date.getFullYear(), DayBegin_Date.getMonth() - 1, DayBegin_Date.getDate());\r\n\r\n            //当前选择日期 str\r\n            var DateShowNowStr = moment(self.DateShow).format('YYYY-MM-DD');\r\n\r\n            //月份循环\r\n            for (var i = 0; i < DayShowCount; i++) {\r\n                var TimeGar = '';\r\n                //计算当前月份天数\r\n                var TimeDateCount = new Date(CountDate.getFullYear(), (CountDate.getMonth() + 1), 0).getDate();\r\n                var ShowYear = CountDate.getFullYear();\r\n                var ShowMonth = CountDate.getMonth();\r\n                //月开始 绘制\r\n                var SVG_Month = '  <g class=\"tick_Total_Year\" transform=\"translate(' + Day_Trans + ')\">' +\r\n                    '<line x1=\"0\" x2=\"0\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>';\r\n                //每一天循环\r\n                for (var j = 0; j < TimeDateCount; j++) {\r\n                    //计算每一天的位移\r\n                    var Day_Trans_min = (j * 12.5).toString();\r\n                    //根据时间计算当前块显示 DATE YYYY-MM-dd\r\n                    var DayTimeStr = moment(new Date(ShowYear, parseInt(ShowMonth), parseInt(j + 1))).format('YYYY-MM-DD');\r\n                    //根据时间加载数据 svg\r\n                    var Data_SVG = GetDayMode_DataShowList(DayTimeStr, Day_Trans_min);\r\n\r\n                    //若当前日期为显示日期\r\n\r\n                    if (DayTimeStr.toString() === DateShowNowStr.toString()) {\r\n\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_guitarpick\"  '\r\n                            + ' transform=\"translate(' + (Day_Trans_min - 8) + ',-10)\">'\r\n                            + '<title>' + DateShowNowStr + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n                    }\r\n\r\n                    //根据时间 初始化 基础svg\r\n                    /*      + ' onclick=\"javascript:' + self.DayRectOnClick(evt, ' + ShowYear + ', ' + ShowMonth + ', ' + j + ') + '\"   >'*/\r\n                    var SVG_Day = '   <g class=\"tick_Year_One\" transform=\"translate(' + Day_Trans_min + ')\" >'\r\n                        + '<rect class=\"DayRect Btn_DayRect\" x=\"0.2\" y=\"0\" width=\"12.5\" height=\"55\" value=\"' + ShowYear + '-' + (parseInt(ShowMonth) + 1) + '-' + parseInt(j + 1) + '\">'\r\n                        + '<title>' + ShowYear + '-' + (parseInt(ShowMonth) + 1) + '-' + parseInt(j + 1) + '</title>'\r\n                        + '</rect>'\r\n                        + '<line class=\"tick_dot\" x1=\"12\" x2=\"12\" y1=\"0\" y2=\"52\"></line>'\r\n                        + '</g>';\r\n                    SVG_Month = SVG_Month + Data_SVG + SVG_Day;\r\n                    if (Day_Trans_min === \"62.5\" || Day_Trans_min === \"125\" || Day_Trans_min === \"187.5\"\r\n                        || Day_Trans_min === \"250\" || Day_Trans_min === \"312.5\" || Day_Trans_min === \"375\") {\r\n                        SVG_Month = SVG_Month\r\n                            + '<line x1=\"' + Day_Trans_min + '\" x2=\"' + Day_Trans_min + '\" y1=\"40\" y2=\"55\" class=\"tick_10DayLine\"'\r\n                            + ' ></line>';\r\n                    }\r\n                }\r\n                Day_Trans = ( TimeDateCount * 12.5) + Day_Trans;\r\n                var Width = ( TimeDateCount * 12.5);\r\n                var Time = CountDate.getFullYear() + \"-\" + (CountDate.getMonth() + 1);\r\n                var Month_End = '<g transform=\"translate(0)\">'\r\n                    + '<rect x=\"0\" y=\"55\" width=\"' + Width + '\" height=\"25\" class=\"Rect_White\"/>'\r\n                    + '<text x=\"12\" y=\"73\" class=\"Month_Text_Show\">' + Time + '</text>'\r\n                    + '</g>'\r\n                    + '<g>'\r\n                    + '<circle cx=\"0\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                    + '<circle cx=\"' + Width + '\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                    + '</g>'\r\n                    + '<line x1=\"' + Width + '\" x2=\"' + Width + '\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>'\r\n                    + '</g>';\r\n                SVG_Month = SVG_Month + TimeGar + Month_End;\r\n                //月显示完结\r\n                SVG_Show = SVG_Show + SVG_Month;\r\n                //时间相加\r\n                CountDate = new Date(moment(CountDate).add(1, 'month'));\r\n            }\r\n            //时间相加\r\n            var ShowTimeLine = document.getElementById(\"ShowSVG_Day\");\r\n            //IE处理\r\n            if (self.browserType !== \"MSIE\") {\r\n                ShowTimeLine.innerHTML = SVG_Show;\r\n            } else {\r\n                $(\"#ShowSVG_Day\").html(SVG_Show);\r\n            }\r\n            Day_ClickFucn();\r\n        }\r\n        ;\r\n\r\n    /**\r\n     * 日模式 -- 单日点击事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var DayRectOnClick = function (event) {\r\n        var Tag = event.getAttribute(\"value\");\r\n        var tagsp = Tag.split('-');\r\n        //转化年月日\r\n        var ClickDate = new Date(tagsp[0], (parseInt(tagsp[1]) - 1), tagsp[2]);\r\n        //设置为世界时\r\n        var ClickDateUTC = new Date(moment(ClickDate).format('YYYY-MM-DD') + 'T00:00:00+00:00');\r\n        //使用UTC赋值\r\n        self.SetShowDate(ClickDateUTC);\r\n    };\r\n\r\n    /**\r\n     * 日模式 -- 获取月模式的数据显示SVG 内容函数\r\n     * @param Show_DayDate 输入传入的年时间\r\n     * @param ShowTransLate 当前年时间的位移\r\n     * @returns {*}\r\n     * @constructor\r\n     */\r\n    var GetDayMode_DataShowList = function (Show_DayDate, ShowTransLate) {\r\n        //   console.log('GetDayMode_DataShowList');\r\n        Show_DayDate = Show_DayDate.toString();\r\n        //若数据长度为0 则返回空\r\n        if (!m_LayerAllModeData.length || m_LayerAllModeData.length === 0) {\r\n            return '';\r\n        }\r\n        //数据整体svg\r\n        var ShowLayer_DataSVG = '<g style=\"width: 12px;height: 40px;fill:#5F5F01\" class=\"tick_Data_Show\"'\r\n            + ' transform=\"translate(' + ShowTransLate + ')\">';\r\n\r\n        //日期格式赋值\r\n        var Date_Rect = Show_DayDate;\r\n\r\n        //是否显示列表\r\n        var IsDataShowList = [];\r\n        var DataMomentBegin = moment.utc(Show_DayDate);\r\n        var DataMomentEnd = moment.utc(Show_DayDate).add(1.0, 'day');\r\n        //查找是否存在数据\r\n        var DataList = CheckDataTimeExistStatus_Day(DataMomentBegin);\r\n\r\n        //查找是否存在数据\r\n        for (var k = 0; k < DataList.length; k++) {\r\n            var m_DataInfo_i = DataList[k];\r\n            //根据数据存在情况加入列表\r\n            IsDataShowList.push(m_DataInfo_i);\r\n        }\r\n        //判定是否有数据条填充 若无填充 则返回空值\r\n        var IS_ShowTag = false;\r\n        //生成基于 数据的是否显示Ture False 列表 使用列表初始化显示\r\n        var rect_Height = Math.round(40 / m_LayerAllModeData.length, 2);\r\n        if (rect_Height > 10) {\r\n            rect_Height = 10;\r\n        }\r\n        for (var i = 0; i < m_LayerAllModeData.length; i++) {\r\n            var DateRect = '';\r\n            var Rect_Y = i * rect_Height;\r\n            //生成RECT 样式\r\n            if (IsDataShowList[i].isExist === true) {\r\n                //   console.log(IsDataShowList[i].isExist);\r\n                //获取当前图层是否显示信息\r\n                var Ishow = IsDataShowList[i].isShow;\r\n                var RectLineEnd = Rect_Y + rect_Height - 0.4;\r\n                //根据显示情况\r\n                if (Ishow) {\r\n                    IS_ShowTag = true;\r\n                    //若该图层显示 则为蓝色\r\n                    DateRect = '<rect class=\"Rect_Data_Show\" x=\"0\" y=\"' + Rect_Y + '\" width=\"12.5\" height=\"' + rect_Height + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                } else {\r\n                    IS_ShowTag = true;\r\n                    //不显示则为灰色\r\n                    DateRect = '<rect class=\"Rect_Data_Hide\" x=\"0\" y=\"' + Rect_Y + '\" width=\"12.5\" height=\"' + rect_Height + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                }\r\n            } else {\r\n                //若没有数据 则为空\r\n                DateRect = '';\r\n            }\r\n            //组成矩阵\r\n            ShowLayer_DataSVG = ShowLayer_DataSVG + DateRect;\r\n        }\r\n        ShowLayer_DataSVG = ShowLayer_DataSVG + '</g>';\r\n        if (IS_ShowTag === false) {\r\n            ShowLayer_DataSVG === '';\r\n        }\r\n        return ShowLayer_DataSVG;\r\n    };\r\n    /*日时间轴部分 end*/\r\n\r\n    /*年时间轴部分 begin*/\r\n    /**\r\n     * 年模式 鼠标左键按下\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseDown_Year = function (event) {\r\n        isMove_Year = true;\r\n        event = event || window.event;\r\n        x_Year = event.clientX;\r\n        X_Before_Year = x_Year;\r\n    };\r\n\r\n    /**\r\n     * 年模式--鼠标左键抬起\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseUP_Year = function (event) {\r\n        event = event || window.event;\r\n        isMove_Year = false;\r\n        x_Year = event.clientX;\r\n        //X_Before_Year = x_Year;\r\n    };\r\n\r\n    /**\r\n     * 年模式 --鼠标移出DIV\r\n     * @constructor\r\n     */\r\n    var GetMouseOut_Year = function () {\r\n        if (self.browserType !== \"Firefox\" && self.browserType !== 'Edge') {\r\n            isMove_Year = false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 年模式 --鼠标移动事件\r\n     * @param evt\r\n     * @constructor\r\n     */\r\n    var MouseMove_Year = function (evt) {\r\n        if (isMove_Year) {\r\n            evt = evt || window.event;\r\n            x_Year = evt.clientX;\r\n            var DrgNum = X_Before_Year - x_Year;\r\n\r\n            X_Before_Year = x_Year;\r\n            if (DrgNum >= 2 || DrgNum <= -2) {\r\n                Year_SVGMove(DrgNum);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     *年模式 -- 位移事件\r\n     * @param transform 位移位置\r\n     * @constructor\r\n     */\r\n    var Year_SVGMove = function (transform) {\r\n        //计算当前最新位移\r\n        m_Trans_Year = m_Trans_Year - transform;\r\n        //获取遍历赋值的局部位移 初始量\r\n        var Trans_now = m_Trans_Year;\r\n        //获取年时间轴的DIV\r\n        var m_ShowSVG_Year = document.getElementById(\"SVG_Year_Total\");\r\n        //初始化比较字符串\r\n        var DateShowYearStr = moment(self.DateShow).format('YYYY');\r\n        //总SVG Label\r\n        var YearTotal = '<g id=\"ShowSVG_Year\" transform=\"translate(' + Trans_now + ',10)\" class=\"x aixs\">';\r\n        //初始化年份 1980\r\n        var YearInit = moment(new Date(1980, 0, 1)).year();\r\n        //循环绘制 年模块\r\n        for (var j = 0; j < YearShowCount; j++) {\r\n            var TimeGar = '';\r\n            var TransMode = (j * 250).toString();\r\n            //年模块SVG\r\n            var YearShow = '<g class=\"tick_Total_Year\" transform=\"translate(' + TransMode + ')\">'\r\n                + '<line x1=\"0\" x2=\"0\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>';\r\n            for (var i = 0; i < 10; i++) {\r\n                var YearClick = YearInit + i;\r\n                var Trans = (i * 25).toString();\r\n                //若当前年时间为选择时间 则加入guitarpick指示当前时间\r\n                if (!self.AnimeMode) {\r\n                    if (DateShowYearStr.toString() === YearClick.toString()) {\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_guitarpick\"  '\r\n                            + ' transform=\"translate(' + (Trans - 3) + ',-10)\">'\r\n                            + '<title>' + YearClick + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n                    }\r\n                } else {\r\n                    if (YearClick.toString() === self.AnimeDate.utc().format('YYYY')) {\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_Anime_guitarpick\"'\r\n                            + ' transform=\"translate(' + (Trans - 3) + ',-10)\">'\r\n                            + '<title>' + YearClick + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n                    }\r\n                }\r\n                //通过当前时间 绘制背景的数据svg\r\n                var SVG_Data = GetYearMode_DataShowList(YearClick, Trans);\r\n\r\n                var IsTitle = \"\";\r\n                //IE状态下对年Title进行缩放\r\n                if (self.browserType !== \"MSIE\") {\r\n                    IsTitle = '<title>' + YearClick + '</title>';\r\n                }\r\n                //绘制基础的年模块部分\r\n                var oneYear = '<g class=\"tick_Year_One\" transform=\"translate(' + Trans + ')\">'\r\n                    + '<rect class=\"DayRect Btn_YearRect\" x=\"0.2\" y=\"0\" width=\"25\" height=\"55\" value=\"' + YearClick + '\"  >'\r\n                    + IsTitle\r\n                    + '</rect>'\r\n                    + '<line class=\"tick_dot\" x1=\"24\" x2=\"24\" y1=\"0\" y2=\"52\"></line>'\r\n                    + '</g>';\r\n                YearShow = YearShow + SVG_Data + oneYear;\r\n            }\r\n            var Right = '<g transform=\"translate(0)\">'\r\n                + '<rect x=\"0\" y=\"55\" width=\"250\" height=\"25\" class=\"Rect_White\" value=\"' + YearInit + '\"/>'\r\n                + '<text x=\"12\" y=\"73\" class=\"Month_Text_Show\">' + YearInit + '</text>'\r\n                + '</g>'\r\n                + '<g>'\r\n                + '<circle cx=\"0\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                + '<circle cx=\"250\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                + '</g>'\r\n                + '<line x1=\"250\" x2=\"250\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>'\r\n                + '</g>';\r\n            YearShow = YearShow + TimeGar + Right;\r\n            YearTotal = YearTotal + YearShow;\r\n            //添加10年\r\n            YearInit = YearInit + 10;\r\n        }\r\n        YearTotal = YearTotal\r\n            + '</g>'\r\n                // '<line x1=\"0\" x2=\"1500\" y1=\"65\" y2=\"65\" class=\"tick_Line\"></line>'\r\n            + '</g>';\r\n        //IE处理\r\n        if (self.browserType !== \"MSIE\") {\r\n            m_ShowSVG_Year.innerHTML = YearTotal;\r\n            $(\"#SVG_Year_Total\").html(YearTotal);\r\n        } else {\r\n            $(\"#SVG_Year_Total\").html(YearTotal);\r\n        }\r\n\r\n        var m_Btn_YearRectList = document.getElementsByClassName('Btn_YearRect');\r\n        for (var w = 0; w < m_Btn_YearRectList.length; w++) {\r\n            m_Btn_YearRectList[w].onclick = function () {\r\n                btnClickGetYear(this);\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 年模式 -- 点击事件\r\n     * @param event\r\n     */\r\n    var btnClickGetYear = function (event) {\r\n\r\n        //调用设置年函数\r\n        var Tag = event.getAttribute(\"value\");\r\n        var ClickDate = new Date(Tag);\r\n        var m_Year = ClickDate.getFullYear();\r\n        SetShowYear(m_Year);\r\n    };\r\n\r\n    /**\r\n     * 年模式 -- 获取月模式的数据显示SVG 内容函数 输入传入的年时间和当前年时间的位移\r\n     * @param Show_YearDate\r\n     * @param ShowTransLate\r\n     * @returns {*}\r\n     * @constructor\r\n     */\r\n\r\n    var GetYearMode_DataShowList = function (Show_YearDate, ShowTransLate) {\r\n        Show_YearDate = Show_YearDate.toString();\r\n        //若数据长度为0 则返回空\r\n        if (m_LayerAllModeData.length === 0 || !m_LayerAllModeData.length) {\r\n            return '';\r\n        }\r\n\r\n        //数据整体svg\r\n        var ShowLayer_DataSVG = '<g style=\"width: 12px;height: 40px;fill:#5F5F01\" class=\"tick_Data_Show\"'\r\n            + ' transform=\"translate(' + ShowTransLate + ')\">';\r\n\r\n\r\n        //是否显示列表\r\n        var IsDataShowList = [];\r\n\r\n        var DataMomentBegin = moment.utc(Show_YearDate);\r\n        var DataMomentEnd = moment.utc(Show_YearDate).add(1.0, 'year');\r\n\r\n        //查找是否存在数据\r\n        var DataList = CheckDataTimeExistStatus_Year(DataMomentBegin);\r\n        //查找是否存在数据\r\n        for (var k = 0; k < DataList.length; k++) {\r\n            var is_ShowTag = false;\r\n            var m_DataInfo_i = DataList[k];\r\n            //  var IndexNum = m_DataInfo_i.indexOf(Date_Rect);\r\n            /*   if (IndexNum !== -1) {\r\n             is_ShowTag = true;\r\n             }*/\r\n            //根据数据存在情况加入列表\r\n            IsDataShowList.push(m_DataInfo_i);\r\n        }\r\n\r\n        //判定是否有数据条填充 若无填充 则返回空值\r\n        var IS_ShowTag = false;\r\n\r\n        var rect_Height = Math.round(40 / m_LayerAllModeData.length, 2);\r\n        if (rect_Height > 10) {\r\n            rect_Height = 10;\r\n        }\r\n        for (var i = 0; i < DataList.length; i++) {\r\n            var DateRect = '';\r\n            var Rect_Y = i * rect_Height;\r\n            //生成RECT 样式\r\n            if (IsDataShowList[i].isExist === true) {\r\n                //获取当前图层是否显示信息\r\n                var Ishow = IsDataShowList[i].isShow;\r\n                var RectLineEnd = Rect_Y + rect_Height - 0.4;\r\n                //根据显示情况\r\n                if (Ishow) {\r\n                    IS_ShowTag = true;\r\n                    //若该图层显示 则为蓝色\r\n                    DateRect = '<rect class=\"Rect_Data_Show\" x=\"0\" y=\"' + Rect_Y + '\" width=\"25\" height=\"' + rect_Height + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"25\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"25\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                } else {\r\n                    IS_ShowTag = true;\r\n                    //不显示则为灰色\r\n                    DateRect = '<rect class=\"Rect_Data_Hide\" x=\"0\" y=\"' + Rect_Y + '\" width=\"25\" height=\"' + rect_Height + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"25\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"25\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                }\r\n            } else {\r\n                //若没有数据 则为空\r\n                DateRect = '';\r\n            }\r\n            //组成矩阵\r\n            ShowLayer_DataSVG = ShowLayer_DataSVG + DateRect;\r\n        }\r\n        ShowLayer_DataSVG = ShowLayer_DataSVG + '</g>';\r\n        if (IS_ShowTag === false) {\r\n            ShowLayer_DataSVG === '';\r\n        }\r\n        return ShowLayer_DataSVG;\r\n    };\r\n\r\n\r\n    /**\r\n     * 月模式 -- 鼠标down事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseDown_Month = function (event) {\r\n        event = event || window.event;\r\n        x_Month = event.clientX;\r\n        X_Before_Month = x_Month;\r\n        isMove_Month = true;\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 鼠标抬起事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseUP_Month = function (event) {\r\n        isMove_Month = false;\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 鼠标移动事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var MouseMove_Month = function (event) {\r\n        event = event || window.event;\r\n        if (isMove_Month) {\r\n            x_Month = event.clientX;\r\n            var DrgNum = X_Before_Month - x_Month;\r\n            if (DrgNum >= 1 || DrgNum <= -1) {\r\n                X_Before_Month = x_Month;\r\n                Month_SvgMove(DrgNum);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 鼠标移出事件\r\n     * @param event\r\n     * @constructor\r\n     */\r\n    var GetMouseOut_Month = function (event) {\r\n        if (self.browserType !== \"Firefox\" && self.browserType !== 'Edge') {\r\n            isMove_Month = false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 初始化TimeLine显示\r\n     * @param DateShow\r\n     * @constructor\r\n     */\r\n    var InitMonthTimeLineShow = function (DateShow) {\r\n        var Trans = (DateShow - self.m_TransYear) * 150;\r\n        Month_SvgMove(Trans);\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 位移事件 重绘时间轴\r\n     * @param tarnsform\r\n     * @constructor\r\n     */\r\n    var Month_SvgMove = function (tarnsform) {\r\n\r\n        //获取 月模式下 SVG的DIV\r\n        var m_ShowSVG = document.getElementById(\"ShowSVG\");\r\n\r\n        //循环添加\r\n        var InnerSvgTotal = \"\";\r\n        m_Trans_Month = m_Trans_Month - tarnsform;\r\n        while (m_Trans_Month > 0) {\r\n            MonthBegin_Date = new Date(moment(MonthBegin_Date).add(-1.0, 'year'));\r\n            m_Trans_Month = m_Trans_Month - 150;\r\n        }\r\n        while (m_Trans_Month < -150) {\r\n            MonthBegin_Date = new Date(moment(MonthBegin_Date).add(1.0, 'year'));\r\n            m_Trans_Month = m_Trans_Month + 150;\r\n        }\r\n        var m_BeginYear = moment(MonthBegin_Date).year();\r\n        //获取当前选择时间的月份 STR 用于Title显示\r\n        var TimeShowStr_Month = moment(self.DateShow).format(\"YYYY-M\");\r\n        // 月循环 MonthShowCount\r\n        for (var i = 0; i < MonthShowCount; i++) {\r\n            var TimeGar = \"\";\r\n            var TimeStr = (m_BeginYear + i).toString();\r\n            var Trans = i * 150 + m_Trans_Month - 150;\r\n            var InnerSvg = '<g class=\"tick_Total_Year\" Tag=\"' + TimeStr + '\" transform=\"translate(' + Trans + ')\">'\r\n                + '<line x1=\"0\" x2=\"0\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>';\r\n            //月份循环\r\n            for (var Month = 0; Month < 12; Month++) {\r\n                var TransMonth = Month * 12.5;\r\n                var ShowDateStr = TimeStr + \"-\" + ( Month + 1);\r\n                var MonthData_Svg = \"\";\r\n\r\n                //调用函数 返回当前单位是否需要显示数据\r\n                MonthData_Svg = GetMothMode_DataShowList(ShowDateStr, TransMonth);\r\n\r\n                var MonthSVG = '<g class=\"tick_Year_One\" transform=\"translate(' + TransMonth + ')\">'\r\n                    + '<rect x=\"0.2\" y=\"0\" width=\"12.5\" height=\"55\" class=\"DayRect Btn_MonthRect\" value=\"' + ShowDateStr + '\">'\r\n                    + '<title>' + ShowDateStr + '</title>'\r\n                    + '</rect>'\r\n                    + '<line class=\"tick_dot\" x1=\"12\" x2=\"12\" y1=\"0\" y2=\"52\"></line>'\r\n                    + '</g>';\r\n                //若显示月为当前月\r\n                if (self.AnimeMode) {\r\n                    if (ShowDateStr.toString() === self.AnimeDate.utc().format(\"YYYY-M\")) {\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_Anime_guitarpick\"'\r\n                            + ' transform=\"translate(' + (Trans + TransMonth - 10) + ',-10)\">'\r\n                            + '<title>' + ShowDateStr + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n                        // MonthSVG = MonthSVG + TimeGar;\r\n                    }\r\n                } else {\r\n                    if (TimeShowStr_Month.toString() === ShowDateStr.toString()) {\r\n                        TimeGar = '<g id=\"guitarpick\" class=\"SVG_guitarpick\"'\r\n                            + ' transform=\"translate(' + (Trans + TransMonth - 10) + ',-10)\">'\r\n                            + '<title>' + ShowDateStr + '</title>'\r\n                            + '<path d=\"'\r\n                            + 'M3.658 0.743C1.775 0.743 0.25 3.793 0.25 7.555l0 21.272l7.302 15.711l7.302 15.711l7.302 -15.711l7.302 -15.711l0 -21.272c0 -3.763 -1.526 -6.813 -3.408 -6.813l-22.392 0z'\r\n                            + '\"></path>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"9\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"14\" y=\"11\" ></rect>'\r\n                            + '<rect width=\"3\" height=\"20\" x=\"19\" y=\"11\" ></rect>'\r\n                            + '</g>';\r\n                        // MonthSVG = MonthSVG + TimeGar;\r\n                    }\r\n                }\r\n                InnerSvg = InnerSvg + MonthData_Svg + MonthSVG;\r\n            }\r\n\r\n            InnerSvg = InnerSvg + '<g transform=\"translate(0)\">'\r\n                + '<rect x=\"0\" y=\"55\" width=\"150\" height=\"25\"  class=\"Rect_White\"/>'\r\n                + '<text x=\"12\" y=\"73\" class=\"Month_Text_Show\" >' + TimeStr + '年</text>'\r\n                + '</g>'\r\n                + '<g>'\r\n                + '<circle cx=\"0\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                + '<circle cx=\"150\" cy=\"55\" r=\"5\" stroke=\"white\" stroke-width=\"2\" fill=\"white\"/>'\r\n                + '</g>'\r\n                + '<line x1=\"150\" x2=\"150\" y1=\"0\" y2=\"80\" class=\"tick_Line\"></line>'\r\n                + '</g>'\r\n                + '</g>';\r\n            InnerSvgTotal = InnerSvgTotal + InnerSvg + TimeGar;\r\n        }\r\n\r\n        m_ShowSVG.innerHTML = InnerSvgTotal;\r\n        //IE处理\r\n        if (self.browserType !== \"MSIE\") {\r\n            m_ShowSVG.innerHTML = InnerSvgTotal;\r\n        } else {\r\n\r\n            $(\"#ShowSVG\").html(InnerSvgTotal);\r\n        }\r\n        //绑定点击事件\r\n        MonthClickFunc();\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 点击事件赋值\r\n     * @constructor\r\n     */\r\n    var MonthClickFunc = function () {\r\n\r\n        var m_MonthRectList = document.getElementsByClassName(\"Btn_MonthRect\");\r\n        for (var i = 0; i < m_MonthRectList.length; i++) {\r\n            m_MonthRectList[i].onclick = function () {\r\n                SetShowMonth(this);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 月模式 -- 获取月模式的数据显示SVG 内容函数\r\n     * @param Show_MonthDate\r\n     * @param ShowTransLate 位移数据\r\n     * @returns {*}\r\n     * @constructor\r\n     */\r\n    var GetMothMode_DataShowList = function (Show_MonthDate, ShowTransLate) {\r\n\r\n        if (!m_LayerAllModeData.length && m_LayerAllModeData.length === 0) {\r\n            return \"\";\r\n        }\r\n        var ShowLayer_DataSVG = '<g style=\"width: 12px;height: 40px;fill:#5F5F01\" class=\"tick_Data_Show\"'\r\n            + ' transform=\"translate(' + ShowTransLate + ')\">';\r\n\r\n        //是否显示列表\r\n        var IsDataShowList = [];\r\n\r\n        var DataMomentBegin = moment.utc(Show_MonthDate);\r\n        var DataMomentEnd = moment.utc(Show_MonthDate).add(1.0, 'month');\r\n\r\n        //查找是否存在数据\r\n        var DataList = CheckDataTimeExistStatus_Month(DataMomentBegin);\r\n        //查找是否存在数据\r\n        for (var k = 0; k < DataList.length; k++) {\r\n\r\n            var m_DataInfo_i = DataList[k];\r\n\r\n            //根据数据存在情况加入列表\r\n            IsDataShowList.push(m_DataInfo_i);\r\n        }\r\n        //生成基于 数据的是否显示Ture False 列表　使用列表初始化显示\r\n        var rect_Height = Math.round(40 / m_LayerAllModeData.length, 2);\r\n\r\n        if (rect_Height > 10) {\r\n            rect_Height = 10;\r\n        }\r\n        var Rect_ShowHeight = rect_Height - 0.8;\r\n        //遍历获取\r\n        for (var i = 0; i < IsDataShowList.length; i++) {\r\n            var DateRect = '';\r\n            var Rect_Y = i * rect_Height;\r\n            //生成RECT 样式\r\n            if (IsDataShowList[i].isExist === true) {\r\n                //获取当前图层是否显示信息\r\n                var IsData_show = IsDataShowList[i].isShow;\r\n                var RectLineEnd = Rect_Y + rect_Height - 0.2;\r\n                //根据显示情况\r\n                if (IsData_show) {\r\n                    //若该图层显示 则为蓝色\r\n                    DateRect = '<rect class=\"Rect_Data_Show\" x=\"0\" y=\"' + Rect_Y + '\" width=\"12.5\" height=\"' + Rect_ShowHeight + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                } else {\r\n                    //有数据 但是当前列 不显示 则为灰色\r\n                    DateRect = '<rect class=\"Rect_Data_Hide\" x=\"0\" y=\"' + Rect_Y + '\" width=\"12.5\" height=\"' + Rect_ShowHeight + '\" ></rect>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + Rect_Y + '\" y2=\"' + Rect_Y + '\" class=\"Data_tick_Line\"></line>'\r\n                        + '<line x1=\"0\" x2=\"12.5\" y1=\"' + RectLineEnd + '\" y2=\"' + RectLineEnd + '\" class=\"Data_tick_Line\"></line>';\r\n                }\r\n            } else {\r\n                //若没有数据 则为\r\n                DateRect = '';\r\n            }\r\n            //组成矩阵\r\n            ShowLayer_DataSVG = ShowLayer_DataSVG + DateRect;\r\n        }\r\n        ShowLayer_DataSVG = ShowLayer_DataSVG + '</g>';\r\n\r\n        return ShowLayer_DataSVG;\r\n    };\r\n\r\n    /**\r\n     * 整体显示 --  点击按钮 伸缩界面 事件\r\n     * @constructor\r\n     */\r\n    var ClickShowAndHide = function () {\r\n        //获取TimeLine 部分的DIV\r\n        var ShowTimeLine = document.getElementsByClassName(\"TimeLineTotalDiv\");\r\n        //如果当前显示为全部\r\n        if (self.Is_ShowSVGLine) {\r\n            for (var i = 0; i < ShowTimeLine.length; i++) {\r\n                ShowTimeLine[i].style.display = \"none\";\r\n            }\r\n            self.Is_ShowSVGLine = false;\r\n        } else {\r\n            //如果当前为压缩模式 修改为伸缩模式\r\n            for (var j = 0; j < ShowTimeLine.length; j++) {\r\n                ShowTimeLine[j].style.display = \"block\";\r\n            }\r\n            self.Is_ShowSVGLine = true;\r\n            //伸长后重绘界面 重新计算\r\n            GetFullModeWidth(self.IDName);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 整体显示 --  显示年选择模式\r\n     * @constructor\r\n     */\r\n    var ShowYearMode = function () {\r\n        var m_Show_YearDiv = document.getElementById(\"Show_YearDiv\");\r\n        var m_Show_MonthDiv = document.getElementById(\"Show_MonthDiv\");\r\n        var m_Show_DayDiv = document.getElementById(\"Show_DayDiv\");\r\n        var m_Show_MinuteDiv = document.getElementById(\"Show_MinuteDiv\");\r\n\r\n        m_Show_YearDiv.style.display = \"block\";\r\n        m_Show_MonthDiv.style.display = \"none\";\r\n        m_Show_DayDiv.style.display = \"none\";\r\n        m_Show_MinuteDiv.style.display = \"none\";\r\n\r\n        //年按钮可用\r\n        document.getElementById(\"btn_AddYear\").disabled = false;\r\n        document.getElementById(\"btn_MinusYear\").disabled = false;\r\n        //月日按钮不可用\r\n        document.getElementById(\"btn_AddMonth\").disabled = true;\r\n        document.getElementById(\"btn_MinusMonth\").disabled = true;\r\n        document.getElementById(\"btn_AddDay\").disabled = true;\r\n        document.getElementById(\"btn_MinusDay\").disabled = true;\r\n\r\n        Year_SVGMove(0);\r\n        self.ShowMode = \"Year_Mode\";\r\n    };\r\n\r\n    /**\r\n     * 整体显示 -- 显示月显示模式\r\n     * @constructor\r\n     */\r\n    var ShowMonthMode = function () {\r\n\r\n        var m_Show_YearDiv = document.getElementById(\"Show_YearDiv\");\r\n        var m_Show_MonthDiv = document.getElementById(\"Show_MonthDiv\");\r\n        var m_Show_DayDiv = document.getElementById(\"Show_DayDiv\");\r\n        var m_Show_MinuteDiv = document.getElementById(\"Show_MinuteDiv\");\r\n\r\n        m_Show_YearDiv.style.display = \"none\";\r\n        m_Show_MonthDiv.style.display = \"block\";\r\n        m_Show_DayDiv.style.display = \"none\";\r\n        m_Show_MinuteDiv.style.display = \"none\";\r\n\r\n        //年月 按钮可用\r\n        document.getElementById(\"btn_AddYear\").disabled = false;\r\n        document.getElementById(\"btn_MinusYear\").disabled = false;\r\n        document.getElementById(\"btn_AddMonth\").disabled = false;\r\n        document.getElementById(\"btn_MinusMonth\").disabled = false;\r\n        //日按钮不可用\r\n        document.getElementById(\"btn_AddDay\").disabled = true;\r\n        document.getElementById(\"btn_MinusDay\").disabled = true;\r\n        self.ShowMode = \"Month_Mode\";\r\n        //计算 差值 每一年 差值150\r\n        m_Trans_Month = (moment(MonthBegin_Date).year() - moment(self.DateShow).year() + 5) * 150;\r\n        Month_SvgMove(0);\r\n    };\r\n\r\n    /**\r\n     * 整体显示 --  显示天显示模式\r\n     * @constructor\r\n     */\r\n    var ShowDayMode = function () {\r\n\r\n        var m_Show_YearDiv = document.getElementById(\"Show_YearDiv\");\r\n        var m_Show_MonthDiv = document.getElementById(\"Show_MonthDiv\");\r\n        var m_Show_DayDiv = document.getElementById(\"Show_DayDiv\");\r\n        var m_Show_MinuteDiv = document.getElementById(\"Show_MinuteDiv\");\r\n        m_Show_YearDiv.style.display = \"none\";\r\n        m_Show_MonthDiv.style.display = \"none\";\r\n        m_Show_DayDiv.style.display = \"block\";\r\n        m_Show_MinuteDiv.style.display = \"none\";\r\n\r\n        //年 月日按钮 可用\r\n        $(\"#btn_AddYear\").attr(\"disabled\", false);\r\n        $(\"#btn_MinusYear\").attr(\"disabled\", false);\r\n        $(\"#btn_AddMonth\").attr(\"disabled\", false);\r\n        $(\"#btn_MinusMonth\").attr(\"disabled\", false);\r\n        $(\"#btn_AddDay\").attr(\"disabled\", false);\r\n        $(\"#btn_MinusDay\").attr(\"disabled\", false);\r\n\r\n        //计算  天显示的时间差\r\n        var Time_Day = Math.round((DayBegin_Date - self.DateShow) / 86400000 * 12.5, 2);\r\n        self.ShowMode = \"Day_Mode\";\r\n        m_Trans_Day = m_Trans_Day + Time_Day;\r\n        Day_SVGMove(0);\r\n    };\r\n\r\n    /**\r\n     * 整体显示 --显示 分钟模式\r\n     * @constructor\r\n     */\r\n    var ShowMinuteMode = function () {\r\n        var m_Show_YearDiv = document.getElementById(\"Show_YearDiv\");\r\n        var m_Show_MonthDiv = document.getElementById(\"Show_MonthDiv\");\r\n        var m_Show_DayDiv = document.getElementById(\"Show_DayDiv\");\r\n        var m_Show_MinuteDiv = document.getElementById(\"Show_MinuteDiv\");\r\n\r\n        m_Show_YearDiv.style.display = \"none\";\r\n        m_Show_MonthDiv.style.display = \"none\";\r\n        m_Show_DayDiv.style.display = \"none\";\r\n        m_Show_MinuteDiv.style.display = \"block\";\r\n        //年 月日按钮 可用\r\n        $(\"#btn_AddYear\").attr(\"disabled\", false);\r\n        $(\"#btn_MinusYear\").attr(\"disabled\", false);\r\n        $(\"#btn_AddMonth\").attr(\"disabled\", false);\r\n        $(\"#btn_MinusMonth\").attr(\"disabled\", false);\r\n        $(\"#btn_AddDay\").attr(\"disabled\", false);\r\n        $(\"#btn_MinusDay\").attr(\"disabled\", false);\r\n\r\n        //设置显示模式\r\n        self.ShowMode = \"Minute_Mode\";\r\n        //计算偏移量\r\n        var ItemTime = self.DateShow - MinuteBegin_Date - 1000 * 60 * 60 * 2;\r\n        var m_Trans = ItemTime / 1000 / 60 * 12.5;\r\n        //拖拽 分钟\r\n        Minute_SVGMove(m_Trans);\r\n    };\r\n\r\n\r\n    var m_LayerAllModeDataMinute = [];\r\n    var m_LayerAllModeDataYear = [];\r\n    var m_LayerAllModeDataMonth = [];\r\n    var m_LayerAllModeDataDay = [];\r\n    /**\r\n     * 添加数据函数\r\n     * @param ADDDatas\r\n     * @constructor\r\n     */\r\n    this.ADDLayerData = function (ADDDatas) {\r\n        var LengthAddCount = ADDDatas.length;\r\n        //对于每一个添加的变量\r\n        if (LengthAddCount) {\r\n            for (var i = 0; i < LengthAddCount; i++) {\r\n                var m_ADDItem = ADDDatas[i];\r\n                //添加 数据图层名称\r\n                var m_LayerName = m_ADDItem.DataName;\r\n                //添加数据图层 存在状态\r\n                var m_Layeris_Show = m_ADDItem.Layeris_Show;\r\n                var IndexNum = m_LayerDataList.indexOf(m_LayerName);\r\n                //若当前不存在 则加入列表及列表-表现层 并为各组数据添加新数据\r\n                if (IndexNum === -1) {\r\n                    m_LayerDataList.push(m_LayerName);\r\n                    m_LayerShowTypeList.push(m_Layeris_Show);\r\n                    m_LayerAllModeData.push(m_ADDItem);\r\n                    m_LayerAllModeDataMinute.push(m_ADDItem.DataInfoMinute);\r\n                    m_LayerAllModeDataYear.push(m_ADDItem.DataInfoYear);\r\n                    m_LayerAllModeDataMonth.push(m_ADDItem.DataInfoMonth);\r\n                    m_LayerAllModeDataDay.push(m_ADDItem.DataInfoDay);\r\n                    IndexNum = m_LayerDataList.length - 1;\r\n                }\r\n            }\r\n        }\r\n        m_LayerExistLayer = [];\r\n        Year_SVGMove(0);\r\n        Month_SvgMove(0);\r\n        Day_SVGMove(0);\r\n        Minute_SVGMove(0);\r\n    };\r\n\r\n    function addDataLayer_Year(m_ADDItem) {\r\n        var DataJson = {\r\n            \"layerName\": \"\",\r\n            \"LayerBeginTime\": \"\"\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * 集成原有函数\r\n     * @type {TimeLine.AddMinuteData}\r\n     */\r\n    this.AddYearData = this.AddMonthData = this.AddDayData = this.AddMinuteData = function (m_InsertData) {\r\n        //调用最新的重构函数\r\n        this.ADDLayerData(m_InsertData);\r\n    };\r\n\r\n\r\n    /**\r\n     * 根据名称 对当前数据进行移除\r\n     * @param RemoveDataLayerName\r\n     * @constructor\r\n     */\r\n    this.RemoveLayerDataByName = function (RemoveDataLayerName) {\r\n        var IndexNum = m_LayerDataList.indexOf(RemoveDataLayerName);\r\n        //不更改顺序 从原始数据中删除 当前移除的数据\r\n        if (IndexNum !== -1) {\r\n            m_LayerDataList.splice(IndexNum, 1);\r\n            m_LayerShowTypeList.splice(IndexNum, 1);\r\n            m_LayerAllModeData.splice(IndexNum, 1);\r\n        }\r\n        //根据新的数据顺序 处理当前列表\r\n\r\n\r\n        //根据当前移除\r\n        switch (self.ShowMode) {\r\n            case \"Year_Mode\":\r\n            {\r\n                Year_SVGMove(0);\r\n                break;\r\n            }\r\n            case \"Month_Mode\":\r\n            {\r\n                Month_SvgMove(0);\r\n                break;\r\n            }\r\n            case \"Day_Mode\":\r\n            {\r\n                Day_SVGMove(0);\r\n                break;\r\n            }\r\n            case \"Minute_Mode\":\r\n            {\r\n                Minute_SVGMove(0);\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 对数据进行整体重新调整结构\r\n     * @param m_NewDataList\r\n     * @constructor\r\n     */\r\n    this.ReSetLayerList = function (m_NewDataList) {\r\n        var m_LayerAllModeData_bak = m_LayerAllModeData;\r\n        m_LayerDataList = [];\r\n        m_LayerShowTypeList = [];\r\n        m_LayerAllModeData = [];\r\n        for (var i = 0; i < m_NewDataList.length; i++) {\r\n            m_LayerDataList.push(m_NewDataList[i].DataName);\r\n            m_LayerShowTypeList.push(m_NewDataList[i].Layeris_Show);\r\n            m_LayerAllModeData_bak.forEach(function (dataItem) {\r\n                if (dataItem.DataName === m_NewDataList[i].DataName) {\r\n                    m_LayerAllModeData.push(dataItem);\r\n                }\r\n            });\r\n        }\r\n        console.log('ReSetLayerList:' + m_LayerAllModeData.length);\r\n    };\r\n\r\n\r\n    /**\r\n     * 获取图层列表\r\n     * @returns {Array}\r\n     * @constructor\r\n     */\r\n    this.GetLayerList = function () {\r\n        return m_LayerDataList;\r\n    };\r\n\r\n\r\n    /**\r\n     * 根据所选参数返回当前图层名称相符的模式的可被动画函数调用的json列表\r\n     * @param m_LayerName 图层名称\r\n     * @param m_BeginTime 开始时间\r\n     * @param m_EndTime 结束时间\r\n     * @param m_DateTye 日期模式 year month day minute\r\n     * @param m_ImageUrl 日当前图层URL\r\n     */\r\n    this.getDataList = function (m_LayerName, m_BeginTime, m_EndTime, m_DateTye, m_ImageUrl) {\r\n        //参数处理\r\n        if (typeof(m_LayerName) !== 'string') {\r\n            console.log(\"图层名称错误！图层名称类型选择必须为：String。\");\r\n            return;\r\n        }\r\n        var m_Selecttype = m_DateTye.toLowerCase();\r\n        if (m_Selecttype !== \"year\" && m_Selecttype !== \"day\"\r\n            && m_Selecttype !== \"month\" && m_Selecttype !== \"minute\") {\r\n            console.log(\"数据类型错误！数据类型选择必须为：year，month，day，mintue中的一个\");\r\n            return;\r\n        }\r\n        //判断开始结束时间类型\r\n        if (!(m_BeginTime instanceof moment)) {\r\n            console.log(\"参数 数据类型错误！开始日期的数据类型选择必须为 moment\");\r\n            return;\r\n        }\r\n        if (!(m_EndTime instanceof moment)) {\r\n            console.log(\"参数 数据类型错误！结束日期的数据类型选择必须为 moment\");\r\n            return;\r\n        }\r\n        var m_Length = m_LayerAllModeData.length;\r\n        var m_MacthData = [];\r\n        //根据输入条件获取当前json数据 只有一个\r\n        if (m_Length !== undefined && m_Length > 0) {\r\n            m_LayerAllModeData.forEach(function (m_dataitem) {\r\n                //根据名字进行 第一次筛选出符合条件的\r\n                if (m_dataitem.DataName === m_LayerName) {\r\n                    var m_dataType = \"\";\r\n                    var m_DateInfo = m_dataitem.DataInfo;\r\n                    //根据类型进行下一次筛选\r\n                    if (m_DateInfo.length > 0) {\r\n                        var Data_length = m_DateInfo[0].length;\r\n                        //根据 Data_length判断当前数据属于什么类型\r\n\r\n                        switch (Data_length) {\r\n                            case 3:\r\n                            case 4:\r\n                            {\r\n                                //年\r\n                                m_dataType = \"year\";\r\n                                break;\r\n                            }\r\n                            case 6:\r\n                            case 7:\r\n                            { //月\"2016-12\"   \"2016-2\"\r\n                                m_dataType = \"month\";\r\n                                break;\r\n                            }\r\n                            case 10:\r\n                            case 11:\r\n                            {\r\n                                //日 \"2017-03-09\"\r\n                                m_dataType = \"day\";\r\n                                break;\r\n                            }\r\n                            case 16:\r\n                            {\r\n                                //分 2017-02-10 06:10\r\n                                m_dataType = \"minute\";\r\n                                break;\r\n                            }\r\n                            default:\r\n                                break;\r\n                        }\r\n                        if (m_dataType === m_Selecttype) {\r\n                            m_MacthData = m_dataitem;\r\n                            //  break;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        /*var m_BeginMoment = moment.utc(m_BeginTime);\r\n\r\n         var m_EndMoment = moment.utc(m_EndTime);*/\r\n\r\n        var m_BeginMoment = m_BeginTime;\r\n\r\n        var m_EndMoment = m_EndTime;\r\n\r\n        var m_TimeList = [];\r\n        // 数据不为空\r\n        if (m_MacthData !== []) {\r\n            var m_allData = m_MacthData.DataInfo;\r\n            //若存在匹配数据\r\n            if (m_allData.length !== undefined) {\r\n                //对数据进行筛选\r\n                for (var t = 0; t < m_allData.length; t++) {\r\n                    var m_itemTime = m_allData[t];\r\n                    var m_timeMoment = moment.utc(m_itemTime);\r\n                    if (m_timeMoment.isAfter(m_BeginMoment) && m_timeMoment.isBefore(m_EndMoment)) {\r\n                        m_TimeList.push(m_timeMoment);\r\n                    } else if (m_timeMoment.isSame(m_BeginMoment) || m_timeMoment.isSame(m_EndMoment)) {\r\n                        m_TimeList.push(m_timeMoment);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        //对URL进行转换\r\n        var m_UrlList = [];\r\n        for (var k = 0; k < m_TimeList.length; k++) {\r\n            // var m_returnItem = [];\r\n            var m_Time = m_TimeList[k];\r\n            var projectUrl = m_ImageUrl;\r\n            if (projectUrl.indexOf('yyyy') > 0) {\r\n                projectUrl = projectUrl.replace('yyyy', m_Time.utc().format(\"YYYY\"));\r\n            }\r\n            if (projectUrl.indexOf('MM') > 0) {\r\n                projectUrl = projectUrl.replace('MM', m_Time.utc().format(\"MM\"));\r\n            }\r\n            if (projectUrl.indexOf('dd') > 0) {\r\n                projectUrl = projectUrl.replace('dd', m_Time.utc().format(\"DD\"));\r\n            }\r\n            if (projectUrl.indexOf('hh') > 0) {\r\n                projectUrl = projectUrl.replace('hh', m_Time.utc().format(\"HH\"));\r\n            }\r\n            if (projectUrl.indexOf('mm') > 0) {\r\n                projectUrl = projectUrl.replace('mm', m_Time.utc().format(\"mm\"));\r\n            }\r\n            /*   m_returnItem.LayerTimeUrl = projectUrl;\r\n             m_returnItem.LayerTimeIndexZ = 550 + k;\r\n             m_returnItem.LayerTimeName = m_LayerName + \"_\" + k;\r\n             m_returnItem.LayerTime = m_Time;*/\r\n            m_UrlList.push(projectUrl);\r\n        }\r\n\r\n\r\n        var m_returnList = [];\r\n        m_returnList.UrlList = m_UrlList;\r\n        m_returnList._id = m_LayerName;\r\n        return m_returnList;\r\n    };\r\n\r\n    /**\r\n     *\r\n     * @param m_LayerName 图层名称\r\n     * @param m_DateTye 日期模式 year month day minute\r\n     */\r\n    this.getLatestDate = function (m_LayerName, m_DateTye) {\r\n        // 参数判断\r\n        if (typeof(m_LayerName) !== 'string') {\r\n            console.log(\"图层名称错误！图层名称类型选择必须为：String。\");\r\n            return;\r\n        }\r\n        var m_Selecttype = m_DateTye.toLowerCase();\r\n        if (m_Selecttype !== \"year\" && m_Selecttype !== \"day\"\r\n            && m_Selecttype !== \"month\" && m_Selecttype !== \"minute\") {\r\n            console.log(\"数据类型错误！数据类型选择必须为：year，month，day，mintue中的一个\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            //遍历选出当前符合条件的data\r\n            var m_Length = m_LayerAllModeData.length;\r\n            var m_MacthData = [];\r\n            //根据输入条件获取当前json数据 只有一个\r\n            if (m_Length !== undefined && m_Length > 0) {\r\n                m_LayerAllModeData.forEach(function (m_dataitem) {\r\n                    //根据名字进行 第一次筛选出符合条件的\r\n                    if (m_dataitem.DataName === m_LayerName) {\r\n                        var m_dataType = \"\";\r\n                        var m_DateInfo = m_dataitem.DataInfo;\r\n                        //根据类型进行下一次筛选\r\n                        if (m_DateInfo.length > 0) {\r\n                            var Data_length = m_DateInfo[0].length;\r\n                            //根据 Data_length判断当前数据属于什么类型\r\n                            switch (Data_length) {\r\n                                case 3:\r\n                                case 4:\r\n                                {\r\n                                    //年\r\n                                    m_dataType = \"year\";\r\n                                    break;\r\n                                }\r\n                                case 6:\r\n                                case 7:\r\n                                { //月\"2016-12\"   \"2016-2\"\r\n                                    m_dataType = \"month\";\r\n                                    break;\r\n                                }\r\n                                case 10:\r\n                                case 11:\r\n                                {\r\n                                    //日 \"2017-03-09\"\r\n                                    m_dataType = \"day\";\r\n                                    break;\r\n                                }\r\n                                case 16:\r\n                                {\r\n                                    //分 2017-02-10 06:10\r\n                                    m_dataType = \"minute\";\r\n                                    break;\r\n                                }\r\n                                default:\r\n                                    break;\r\n                            }\r\n                            if (m_dataType === m_Selecttype) {\r\n                                m_MacthData = m_dataitem;\r\n                                //  break;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }\r\n\r\n            var m_LatestDate = \"\";\r\n            //从 m_MacthData 获取最新的数据\r\n            if (m_MacthData !== []) {\r\n                var m_allData = m_MacthData.DataInfo;\r\n                if (m_allData !== undefined) {\r\n                    var m_length = m_allData.length;\r\n                    m_LatestDate = m_allData[m_length - 1];\r\n                }\r\n            }\r\n            if (m_LatestDate !== \"\") {\r\n                var m_LatestDate_moment = moment(m_LatestDate + \"+00:00\");\r\n                return m_LatestDate_moment.utc();\r\n            } else {\r\n                return;\r\n            }\r\n        } catch (err) {\r\n            return;\r\n        }\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * 返回所有依据于当前时间的 所有开始列表\r\n     * @returns {*}\r\n     */\r\n    this.getDataInfoBeginList = function () {\r\n        console.log('_FindTimeBegin');\r\n        var dataStrNew = moment().utc(this.DateShow).format('YYYYMMDDHHmmss');\r\n        var isFind = false;\r\n        if (m_LayerAllModeData.length > 0) {\r\n            m_LayerAllModeData.forEach(function (dataItem) {\r\n                var dataInfoItem = dataItem.DataInfo;\r\n                //若没有找到匹配\r\n                if (!isFind) {\r\n                    var beginTimem = moment.utc(dataInfoItem.BeginTime);\r\n                    var endTimem = moment.utc(dataInfoItem.EndTime);\r\n                    var timeSelect = moment.utc(dataStrNew);\r\n                    if (timeSelect.isBetween(beginTimem, endTimem)) {\r\n                        dataStrNew = beginTimem.format('YYYYMMDDHHmm') + \"00\";\r\n                        isFind = true;\r\n                        console.log(\"Find Begin!\" + dataStrNew);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        console.log(\"dataStrNew:\" + dataStrNew);\r\n        return dataStrNew;\r\n    };\r\n\r\n    /**\r\n     * 动画显示部分 begin\r\n     */\r\n\r\n    /**\r\n     * 是否为动画模式\r\n     * @type {boolean}\r\n     */\r\n    self.AnimeMode = false;\r\n    //动画显示开始结束时间\r\n    self.Anime_BeginTime;\r\n    self.Anime_EndTime;\r\n\r\n    //当前动画显示到哪一帧 （moment时间）\r\n    self.AnimeDate;\r\n\r\n    /**\r\n     * 设置动画模式\r\n     * @param m_beginTime 动画范围开始时间\r\n     * @param m_endTime 动画范围结束时间\r\n     * @constructor\r\n     */\r\n    this.SetAmineMode = function (m_beginTime, m_endTime) {\r\n\r\n        //参数正确性判断\r\n        if (!(m_beginTime instanceof moment)) {\r\n            console.log(\"参数类型错误，m_beginTime的类型需要为：moment\");\r\n            return false;\r\n        }\r\n        if (!(m_endTime instanceof moment)) {\r\n            console.log(\"参数类型错误，m_beginTime的类型需要为：moment\");\r\n            return false;\r\n        }\r\n        //对参数进行赋值操作\r\n\r\n        //如果当前设置的时分秒 不为5min的整数倍数\r\n        //对开始时间向后 结束时间向前进行 整数化处理 todo 判定是否需要？？？\r\n        self.Anime_BeginTime = m_beginTime;\r\n        self.Anime_EndTime = m_endTime;\r\n        //设置动画模式为true\r\n        self.AnimeDate = m_beginTime;\r\n        self.AnimeMode = true;\r\n        //刷新当前显示 todo\r\n        return true;\r\n    };\r\n\r\n\r\n    /**\r\n     * 设置当前显示的动画时间\r\n     * @param m_AnimeDate 设置的动画时间\r\n     * @constructor\r\n     */\r\n    this.SetAmineDate = function (m_AnimeDate) {\r\n        if (!(m_AnimeDate instanceof moment)) {\r\n            //    console.log(\"参数类型错误，m_AnimeDate需要为moment类型。\");\r\n            return false;\r\n        } else {\r\n            //todo 传入参数是否需要进行５ｍｉｎ的整数化处理 目前默认为5min模式\r\n            self.AnimeDate = m_AnimeDate;\r\n            self.AnimeMode = true;\r\n\r\n            Minute_SVGMove(0);\r\n            Day_SVGMove(0);\r\n            Month_SvgMove(0);\r\n            Year_SVGMove(0);\r\n            return true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 设置当前动画模式结束\r\n     * @returns {boolean}\r\n     * @constructor\r\n     */\r\n    this.SetAmineMode_End = function () {\r\n        self.AnimeMode = false;\r\n        //将各种范围数据赋值为空（防止下次调用的时候bug）\r\n        self.Anime_BeginTime = null;\r\n        self.Anime_EndTime = null;\r\n        self.AnimeDate = null;\r\n        // todo 刷新当前显示 暂时只对分钟模式进行处理\r\n        Minute_SVGMove(0);\r\n        Day_SVGMove(0);\r\n        Month_SvgMove(0);\r\n        Year_SVGMove(0);\r\n        return true;\r\n    };\r\n\r\n    //测试变量 用于控制是否显示动画进度条\r\n    var is_ShowTrans = false;\r\n\r\n    /**\r\n     * 根据当前设置的动画模式判断 是否需要显示动画范围部分  todo 未完成\r\n     * @param Show_DayDate 当前svg遍历显示部分  moment(HourNow).utc().format('YYYY-MM-DD HH:mm');\r\n     * @param ShowTransLate 当前SVG遍历显示部分的位移\r\n     * @constructor\r\n     */\r\n    var GetMinuteMode_AnimeDateList = function (Show_DayDate, ShowTransLate) {\r\n        if (!is_ShowTrans) {\r\n\r\n            return \"\";\r\n        }\r\n        //判断模式 只有动画模式才对SVG进行显示\r\n        if (self.AnimeMode === false) {\r\n            return \"\";\r\n        }\r\n\r\n        if (self.Anime_BeginTime === null || self.Anime_EndTime === null || self.AnimeDate === null) {\r\n            return \"\";\r\n        }\r\n\r\n        //首先判断是否在动画播放值域范围内 转化为moment\r\n        var m_TimeStr = Show_DayDate + \"+00:00\";\r\n        var m_momentTime = moment(m_TimeStr);\r\n\r\n        //若超出时间范围\r\n        if (self.Anime_BeginTime.isAfter(m_momentTime) || self.Anime_EndTime.isBefore(m_momentTime)) {\r\n            return \"\";\r\n        }\r\n\r\n        //在时间范围内 分为以下几种情况\r\n        //1。开始时次 且未经过\r\n        //2.开始时次 且经过\r\n        //3.中间时次 且未经过\r\n        //4.中间时次 且经过\r\n        //5.结束时次 且未经过\r\n        //6.结束时次 且经过\r\n        var ShowLayer_DataSVG = \"\";\r\n\r\n        //判断是否在开始时间范围内\r\n        //与开始时间的时间差 相差5min以内 等于开始时间 或者大于开始时间 且小于开始时间+5\r\n        //1.等于开始时次 等于结束时次 在这个时间范围内\r\n        //当前进行时间\r\n        if (self.Anime_BeginTime.isBefore(m_momentTime) && self.Anime_EndTime.isAfter(m_momentTime)) {\r\n\r\n            //在时间范围内\r\n            //判断是否已经进行 运行时间 大于当前时间 则已经进行\r\n            if (self.AnimeDate.isBefore(m_momentTime)) {\r\n                ShowLayer_DataSVG = '<g style=\"width: 12px;height: 40px;fill:#102f8c\" class=\"tick_Data_Show1\"'\r\n                    + ' transform=\"translate(' + ShowTransLate + ')\">'\r\n                    + '<rect class=\"DayRect1 Btn_MinuteRect1\"  style=\"fill:#102f8c;opacity: 0.5;\" x=\"0.2\" y=\"0\" width=\"12.5\" height=\"55\"></rect> '\r\n                    + '</g>';\r\n            } else {\r\n                ShowLayer_DataSVG = '<g style=\"width: 12px;height: 40px;fill:#8eb9cc\" class=\"tick_Data_Show1\"'\r\n                    + 'transform=\"translate(' + ShowTransLate + ')\"> '\r\n                    + '<rect class=\"DayRect1 Btn_MinuteRect1\"  style=\"fill:#8eb9cc;opacity: 0.5;\" x=\"0.2\" y=\"0\" width=\"12.5\" height=\"55\"></rect> '\r\n                    + '</g>';\r\n            }\r\n        }\r\n\r\n        return ShowLayer_DataSVG;\r\n\r\n    };\r\n\r\n    //使用不区分模式 的 选择\r\n    //每一种 产品作为一个 json 项目，不再区分 模式。\r\n\r\n    var CheckDataTimeExistStatus = function (BeginTime_moment, EndTimeStr_moment, TimeMode) {\r\n\r\n        var TimeCompare_begin = BeginTime_moment.format(\"YYYY-MM-DD HH:mm\");\r\n        //返回一个 n维数组\r\n        var ExistReturn = [{\r\n            \"isExist\": true,\r\n            \"isShow\": true,\r\n            \"Width\": \"\",\r\n            \"isBofore\": \"\",\r\n            \"isEnd\": \"\"\r\n        }, {\"isExist\": true, \"isShow\": true, \"Width\": 0, \"isBofore\": \"\", \"isEnd\": \"\"}];\r\n        ExistReturn = [];\r\n\r\n        //处理JSON\r\n        m_LayerAllModeData.forEach(function (DataJsonItem) {\r\n            var ExistReturnItem = {\r\n                \"layerName\": DataJsonItem.DataName,\r\n                \"timeNow\": BeginTime_moment.format(\"YYYYMMDDHHmmss\"),\r\n                \"isExist\": false\r\n            };\r\n            var DataInfo = DataJsonItem.DataInfoMinute;\r\n            if (DataInfo && DataInfo.length > 0) {\r\n                //遍历每一个时段 对 当前时间段内的数据存在进行查找。\r\n                DataInfo.forEach(function (DataTimeItem) {\r\n                    if (TimeCompare_begin === DataTimeItem.TimeStr) {\r\n                        ExistReturnItem.isExist = true;\r\n                    }\r\n                });\r\n            }\r\n            //设置查找\r\n            ExistReturnItem.isShow = DataJsonItem.Layeris_Show;\r\n            ExistReturn.push(ExistReturnItem);\r\n        });\r\n\r\n        return ExistReturn;\r\n    };\r\n\r\n    var CheckDataTimeExistStatus_Year = function (BeginTime_moment) {\r\n        var TimeCompare_begin = BeginTime_moment.format(\"YYYY\");\r\n        //返回一个 n维数组\r\n        var ExistReturn = [{\r\n            \"isExist\": true,\r\n            \"isShow\": true,\r\n            \"Width\": \"\",\r\n            \"isBofore\": \"\",\r\n            \"isEnd\": \"\"\r\n        }, {\"isExist\": true, \"isShow\": true, \"Width\": 0, \"isBofore\": \"\", \"isEnd\": \"\"}];\r\n        ExistReturn = [];\r\n\r\n        //处理JSON\r\n        m_LayerAllModeData.forEach(function (DataJsonItem) {\r\n            var ExistReturnItem = {\r\n                \"layerName\": DataJsonItem.DataName,\r\n                \"timeNow\": BeginTime_moment.format(\"YYYYMMDDHHmmss\"),\r\n                \"isExist\": false\r\n            };\r\n            var DataInfo = DataJsonItem.DataInfoYear;\r\n            if (DataInfo && DataInfo.length > 0) {\r\n                //遍历每一个时段 对 当前时间段内的数据存在进行查找。\r\n                DataInfo.forEach(function (DataTimeItem) {\r\n                    if (TimeCompare_begin === DataTimeItem.TimeStr) {\r\n                        ExistReturnItem.isExist = true;\r\n                    }\r\n                });\r\n            }\r\n            //设置查找\r\n            ExistReturnItem.isShow = DataJsonItem.Layeris_Show;\r\n            ExistReturn.push(ExistReturnItem);\r\n        });\r\n\r\n        return ExistReturn;\r\n    };\r\n    var CheckDataTimeExistStatus_Month = function (BeginTime_moment) {\r\n        var TimeCompare_begin = BeginTime_moment.format(\"YYYY-MM\");\r\n        //返回一个 n维数组\r\n        var ExistReturn = [{\r\n            \"isExist\": true,\r\n            \"isShow\": true,\r\n            \"Width\": \"\",\r\n            \"isBofore\": \"\",\r\n            \"isEnd\": \"\"\r\n        }, {\"isExist\": true, \"isShow\": true, \"Width\": 0, \"isBofore\": \"\", \"isEnd\": \"\"}];\r\n        ExistReturn = [];\r\n\r\n        //处理JSON\r\n        m_LayerAllModeData.forEach(function (DataJsonItem) {\r\n            var ExistReturnItem = {\r\n                \"layerName\": DataJsonItem.DataName,\r\n                \"timeNow\": BeginTime_moment.format(\"YYYYMMDDHHmmss\"),\r\n                \"isExist\": false\r\n            };\r\n            var DataInfo = DataJsonItem.DataInfoMonth;\r\n            if (DataInfo && DataInfo.length > 0) {\r\n                //遍历每一个时段 对 当前时间段内的数据存在进行查找。\r\n                DataInfo.forEach(function (DataTimeItem) {\r\n                    if (TimeCompare_begin === DataTimeItem.TimeStr) {\r\n                        ExistReturnItem.isExist = true;\r\n                    }\r\n                });\r\n            }\r\n            //设置查找\r\n            ExistReturnItem.isShow = DataJsonItem.Layeris_Show;\r\n            ExistReturn.push(ExistReturnItem);\r\n        });\r\n\r\n        return ExistReturn;\r\n    };\r\n    var CheckDataTimeExistStatus_Day = function (BeginTime_moment) {\r\n        var TimeCompare_begin = BeginTime_moment.format(\"YYYY-MM-DD\");\r\n        //返回一个 n维数组\r\n        var ExistReturn = [{\r\n            \"isExist\": true,\r\n            \"isShow\": true,\r\n            \"Width\": \"\",\r\n            \"isBofore\": \"\",\r\n            \"isEnd\": \"\"\r\n        }, {\"isExist\": true, \"isShow\": true, \"Width\": 0, \"isBofore\": \"\", \"isEnd\": \"\"}];\r\n        ExistReturn = [];\r\n\r\n        //处理JSON\r\n        m_LayerAllModeData.forEach(function (DataJsonItem) {\r\n            var ExistReturnItem = {\r\n                \"layerName\": DataJsonItem.DataName,\r\n                \"timeNow\": BeginTime_moment.format(\"YYYYMMDDHHmmss\"),\r\n                \"isExist\": false\r\n            };\r\n            var DataInfo = DataJsonItem.DataInfoDay;\r\n            if (DataInfo && DataInfo.length > 0) {\r\n                //遍历每一个时段 对 当前时间段内的数据存在进行查找。\r\n                DataInfo.forEach(function (DataTimeItem) {\r\n                    if (TimeCompare_begin === DataTimeItem.TimeStr) {\r\n                        ExistReturnItem.isExist = true;\r\n                    }\r\n                });\r\n            }\r\n            //设置查找\r\n            ExistReturnItem.isShow = DataJsonItem.Layeris_Show;\r\n            ExistReturn.push(ExistReturnItem);\r\n        });\r\n\r\n        return ExistReturn;\r\n    };\r\n    var CheckDataTimeExistStatus_Minute = function (BeginTime_moment) {\r\n        var TimeCompare_begin = BeginTime_moment.format(\"YYYY-MM-DD HH:mm\");\r\n        //返回一个 n维数组\r\n        var ExistReturn = [{\r\n            \"isExist\": true,\r\n            \"isShow\": true,\r\n            \"Width\": \"\",\r\n            \"isBofore\": \"\",\r\n            \"isEnd\": \"\"\r\n        }, {\"isExist\": true, \"isShow\": true, \"Width\": 0, \"isBofore\": \"\", \"isEnd\": \"\"}];\r\n        ExistReturn = [];\r\n\r\n        //处理JSON\r\n        m_LayerAllModeData.forEach(function (DataJsonItem) {\r\n            var ExistReturnItem = {\r\n                \"layerName\": DataJsonItem.DataName,\r\n                \"timeNow\": BeginTime_moment.format(\"YYYYMMDDHHmmss\"),\r\n                \"isExist\": false\r\n            };\r\n            var DataInfo = DataJsonItem.DataInfoMinute;\r\n            if (DataInfo && DataInfo.length > 0) {\r\n                //遍历每一个时段 对 当前时间段内的数据存在进行查找。\r\n                DataInfo.forEach(function (DataTimeItem) {\r\n                    if (TimeCompare_begin === DataTimeItem.TimeStr) {\r\n                        ExistReturnItem.isExist = true;\r\n                    }\r\n                });\r\n            }\r\n            //设置查找\r\n            ExistReturnItem.isShow = DataJsonItem.Layeris_Show;\r\n            ExistReturn.push(ExistReturnItem);\r\n        });\r\n\r\n        return ExistReturn;\r\n    };\r\n\r\n\r\n    /**\r\n     * 对外接口 获取当前数据时间段内的 开始时间 若无时间，则返回当前选择时间。\r\n     * @type {_findDataExistList}\r\n     */\r\n    this.findDataExistList = _findDataExistList;\r\n\r\n    /**\r\n     * 根据 当前 Layer的名字 对数据开始时间进行查找，若能查找到 则显示\r\n     * @param lamuduleName\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    function _findDataExistList(layerName) {\r\n        var TimeSP = moment(this.DateShow).utc().format('YYYYMMDDHHmm') + \"00\";\r\n        var TimeStrReturn = TimeSP;\r\n        var isFindExist = false;\r\n        console.log('ReSetLayerList11111:' + m_LayerAllModeData.length);\r\n        //  console.log(\"m_LayerAllModeData.length:\" + m_LayerAllModeData.length);\r\n        // console.log(m_LayerAllModeData.length);\r\n        m_LayerAllModeData.forEach(function (DataJsonItem) {\r\n            var DataName = DataJsonItem.DataName;\r\n\r\n            if (DataName.toString() === layerName.toString() && isFindExist === false) {\r\n                var DataInfoList = DataJsonItem.DataInfo;\r\n                //遍历每一个时间段\r\n                if (DataInfoList) {\r\n                    DataInfoList.forEach(function (DataTimeItem) {\r\n                        if (isFindExist === false) {\r\n                            var BeginTime = moment.utc(DataTimeItem.BeginTime);\r\n                            var EndTime = moment.utc(DataTimeItem.EndTime);\r\n                            var TimeSelect = moment.utc(TimeSP, \"YYYYMMDDHHmmss\");\r\n                            if (TimeSelect.isBetween(BeginTime, EndTime)\r\n                                || TimeSelect.isSame(BeginTime)\r\n                                || TimeSelect.isSame(EndTime)\r\n                            ) {\r\n                                isFindExist = true;\r\n                                TimeStrReturn = BeginTime.format('YYYYMMDDHHmmss');\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n        });\r\n        var returnJson = {\"isFindExist\": isFindExist, \"TimeStrReturn\": TimeStrReturn};\r\n        return returnJson;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n"]}