{"version":3,"sources":["readMYSQL.js"],"names":[],"mappings":"AAAA;;;;;AAKA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,SAAS,QAAQ,eAAR,CAAb;;AAEA,SAAS,oBAAT,GAAgC;AAC5B,QAAI,QAAQ,MAAZ;AACA,QAAI,SAAS,OAAb;AACA,QAAI,WAAW,KAAf;AACA,QAAI,aAAa,GAAjB;AACA,QAAI,OAAO,kCACP,kBADO,GACc,KADd,GAEL,yBAFK,GAEuB,MAFvB,GAGL,sBAHK,GAGoB,QAHpB,GAIL,oBAJK,GAIkB,UAJlB,GAKL,6CALK,GAML,aANN;;AAQA,YAAQ,GAAR,CAAY,IAAZ;AACA,QAAI,SAAS,MAAM,gBAAN,CAAuB;AAChC,gBAAQ,OAAO,KAAP,CAAa,IADW;AAEhC,gBAAQ,OAAO,KAAP,CAAa,IAFW;AAGhC,oBAAY,OAAO,KAAP,CAAa,QAHO;AAIhC,oBAAY,OAAO,KAAP,CAAa;AAJO,KAAvB,CAAb;;AAOA,WAAO,OAAP;AACA,WAAO,KAAP,CAAa,IAAb,EAAmB,SAAS,QAAT,CAAkB,GAAlB,EAAuB,OAAvB,EAAgC;AAC3C,eAAO,GAAP;AACA,YAAI,GAAJ,EAAS;AACL,gBAAI,GAAJ,CAAQ,KAAK,SAAL,CAAe,GAAf,CAAR;AACA;AACH;AACD,YAAI,OAAJ,EAAa;AACT,gBAAI,WAAW,EAAf;;AAEA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,QAAQ,MAA5B,EAAoC,GAApC,EAAyC;AACrC,oBAAI,OAAO,QAAQ,CAAR,CAAX;AACA,oBAAI,KAAK,OAAT,EAAkB;AACd,wBAAI,WACJ,EAAC,WAAW,KAAK,SAAjB,EAA4B,SAAS,KAAK,OAA1C,EADA;AAEA,6BAAS,IAAT,CAAc,QAAd;AACH;AACJ;AACD,oBAAQ,GAAR,CAAY,QAAZ;AACA,eAAG,aAAH,CAAiB,UAAjB,EAA6B,KAAK,SAAL,CAAe,QAAf,CAA7B;AACH;AAEJ,KArBL;AAuBA,WAAO,EAAP,CAAU,OAAV,EAAmB,UAAU,GAAV,EAAe;AAC9B,YAAI,GAAJ,EAAS;AACL,mBAAO,GAAP;AACH;AACJ,KAJD;AAKH;AACD","file":"readMYSQL-compiled.js","sourcesContent":["/**\r\n * Created by lenovo on 2017/11/22.\r\n * 从MYSQL数据库中获取\r\n */\r\n\r\nvar mysql = require('mysql');\r\nvar fs = require('fs');\r\nvar config = require('./config.json');\r\n\r\nfunction getFromMysqlDataInfo() {\r\n    var SatID = \"H8XX\";\r\n    var InstID = \"AHIXX\";\r\n    var ProdName = \"PRJ\";\r\n    var Resolution = 500;\r\n    var _SQL = \" SELECT  * FROM ProductInfo  \" +\r\n        \" where  SatID ='\" + SatID\r\n        + \"' and InstrumentName ='\" + InstID\r\n        + \"' and ProductName ='\" + ProdName\r\n        + \"' and Resolution =\" + Resolution\r\n        + \" and IsExitFlag = 1 order by CreatTime desc\"\r\n        + \" limit 1000\";\r\n\r\n    console.log(_SQL);\r\n    var client = mysql.createConnection({\r\n        \"host\": config.MYSQL.host,\r\n        \"user\": config.MYSQL.user,\r\n        \"password\": config.MYSQL.password,\r\n        \"database\": config.MYSQL.database\r\n    });\r\n\r\n    client.connect();\r\n    client.query(_SQL, function selectCb(err, results) {\r\n            client.end();\r\n            if (err) {\r\n                res.end(JSON.stringify(err));\r\n                next();\r\n            }\r\n            if (results) {\r\n                var DataList = [];\r\n\r\n                for (var i = 0; i < results.length; i++) {\r\n                    var item = results[i];\r\n                    if (item.EndTime) {\r\n                        var pushItem =\r\n                        {begintime: item.StartTime, endtime: item.EndTime};\r\n                        DataList.push(pushItem);\r\n                    }\r\n                }\r\n                console.log(DataList);\r\n                fs.writeFileSync('PRJ.json', JSON.stringify(DataList));\r\n            }\r\n\r\n        }\r\n    );\r\n    client.on('error', function (err) {\r\n        if (err) {\r\n            client.end();\r\n        }\r\n    });\r\n}\r\ngetFromMysqlDataInfo();"]}